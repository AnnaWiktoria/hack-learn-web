<!DOCTYPE html>
<html lang="pl">

<head>

 <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AnnaWiktoria">
    <meta name="copyright" content="AnnaWiktoria">
    <meta name="description" content="Interaktywny kurs bezpiecze≈Ñstwa aplikacji webowych. Licencja CC BY-NC-SA.">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com; 
               script-src 'self' 'unsafe-inline'; 
               img-src 'self' data:;">

    <title>Kurs bezpiecze≈Ñstwa aplikacji webowych - Lekcja 14: API Security</title>
      
      <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">


    <style>
        /* Akcent: Electric API Blue (Connectivity / JSON) */
        :root {
            --accent: #00b0ff;
            --accent-glow: rgba(0, 176, 255, 0.3);
        }

        .json-key {
            color: #00e5ff;
        }

        .json-val {
            color: #ffd600;
        }

        .json-bool {
            color: #ff0055;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>API SECURITY</h1>
            <p>MODU≈Å 14: REST, IDOR (BOLA), Mass Assignment i Rate Limiting</p>
        </header>

        <!-- 1. WSTƒòP -->
        <section>
            <h2>> NOWY ≈öWIAT: JSON I REST</h2>
            <p>Tradycyjne aplikacje zwraca≈Çy HTML. Nowoczesne (React, Vue, Mobile Apps) rozmawiajƒÖ z serwerem tylko
                przez <strong>API</strong>, wymieniajƒÖc dane w formacie <strong>JSON</strong>.</p>

            <div class="card">
                <h3>DLACZEGO API TO INNY ≈öWIAT?</h3>
                <ul>
                    <li><strong>Klient jest "gruby":</strong> Logika czƒôsto przeniesiona jest do przeglƒÖdarki (JS), a
                        API to tylko "baza danych na sterydach".</li>
                    <li><strong>Wiƒôcej danych:</strong> API czƒôsto zwraca <em>za du≈ºo</em> danych (np. pe≈Çny obiekt
                        u≈ºytkownika z has≈Çem), liczƒÖc, ≈ºe frontend ich po prostu nie wy≈õwietli.</li>
                    <li><strong>Brak stanu:</strong> Ka≈ºde zapytanie musi mieƒá token (zazwyczaj JWT).</li>
                </ul>
            </div>
        </section>

        <!-- 2. IDOR / BOLA -->
        <section>
            <h2>> KR√ìL PODATNO≈öCI: IDOR (BOLA)</h2>
            <p>W ≈õwiecie OWASP API Top 10, IDOR nazywa siƒô teraz <strong>BOLA (Broken Object Level
                    Authorization)</strong>. To najczƒôstszy i najbardziej krytyczny b≈ÇƒÖd w API.</p>

            <div class="card">
                <h3>SCENARIUSZ ATAKU</h3>
                <p>Jeste≈õ zalogowany jako User A (ID: 100). Chcesz zobaczyƒá swoje zam√≥wienie.</p>
                <pre><code>GET /api/v1/orders/100
Authorization: Bearer eyJhbGci...</code></pre>

                <p><strong>Atak:</strong> Zmieniasz ID na <code>101</code> (zam√≥wienie innej osoby).</p>
                <pre><code>GET /api/v1/orders/<span class="highlight">101</span></code></pre>

                <p><strong>B≈ÇƒÖd:</strong> Serwer sprawdza "Czy token jest wa≈ºny?", ale zapomina sprawdziƒá "Czy ten token
                    nale≈ºy do w≈Ça≈õciciela zam√≥wienia 101?". Dostajesz cudze dane.</p>
            </div>
        </section>

        <!-- 3. MASS ASSIGNMENT -->
        <section>
            <h2>> MASS ASSIGNMENT</h2>
            <p>Frameworki (Node.js, Ruby on Rails, Spring) czƒôsto majƒÖ funkcjƒô "automatycznego bindowania". BiorƒÖ JSON
                od klienta i wrzucajƒÖ go prosto do bazy danych.</p>

            <div class="card">
                <h3>SCENARIUSZ: NADPISANIE ROLI</h3>
                <p>Frontend wysy≈Ça ≈ºƒÖdanie aktualizacji profilu:</p>
                <pre><code>PUT /api/users/me
{
  "<span class="json-key">username</span>": "<span class="json-val">jan_kowalski</span>",
  "<span class="json-key">email</span>": "<span class="json-val">jan@firma.pl</span>"
}</code></pre>

                <p><strong>Atak:</strong> Haker zgaduje nazwƒô kolumny w bazie (np. <code>is_admin</code> lub
                    <code>role</code>) i dokleja jƒÖ do JSON-a:</p>
                <pre><code>{
  "<span class="json-key">username</span>": "<span class="json-val">jan_kowalski</span>",
  "<span class="json-key">email</span>": "<span class="json-val">jan@firma.pl</span>",
  "<span class="json-key">is_admin</span>": <span class="json-bool">true</span>
}</code></pre>

                <p><strong>Skutek:</strong> Je≈õli backend bezmy≈õlnie zapisuje ca≈Çy obiekt -> zostajesz administratorem.
                </p>
            </div>
        </section>

        <!-- 4. RATE LIMITING -->
        <section>
            <h2>> BRAK HAMULC√ìW (RATE LIMITING)</h2>
            <p>API sƒÖ stworzone do szybkiej komunikacji. To idealne ≈õrodowisko do atak√≥w si≈Çowych (Brute Force).</p>

            <div class="card">
                <h3>CO TESTUJEMY?</h3>
                <ul>
                    <li><strong>Logowanie:</strong> Czy po 5 pr√≥bach dostanƒô blokadƒô?</li>
                    <li><strong>Reset has≈Ça:</strong> Czy mogƒô wys≈Çaƒá 1000 emaili na sekundƒô (Email Bombing)?</li>
                    <li><strong>Kody SMS (2FA):</strong> Czy mogƒô sprawdziƒá wszystkie 9999 kod√≥w w minutƒô?</li>
                </ul>
                <p>Je≈õli serwer nie zwraca statusu <span class="status-badge s-4xx">429 Too Many Requests</span>, to
                    znaczy, ≈ºe jest podatny.</p>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section>
            <h2>CHECKLISTA / RED FLAGS</h2>
            <div class="card checklist-card">
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Sekwencyjne ID (1, 2, 3...):</strong> Zaproszenie do wycieku danych (Enumeracja). API
                        powinno u≈ºywaƒá UUID.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Nadmiarowe dane (Excessive Data Exposure):</strong> API zwraca ca≈Çy obiekt (has≈Ço,
                        PESEL), a frontend filtruje tylko to, co pokazaƒá. Haker widzi w Burpie wszystko.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Szczeg√≥≈Çowe b≈Çƒôdy:</strong> "User with ID 5 not found" vs "Invalid ID". To pierwsze
                        pozwala mapowaƒá bazƒô u≈ºytkownik√≥w.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>PUT/DELETE bez AuthZ:</strong> Czƒôsto deweloperzy zabezpieczajƒÖ GET, ale zapominajƒÖ o
                        metodach zmieniajƒÖcych stan.</div>
                </div>
            </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz-section">
            <h2>üéì WERYFIKACJA WIEDZY</h2>
            <div id="quiz-container"></div>
        </section>

        <footer>
            <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Hack & Learn: Web Edition | Modu≈Ç 14</p>
        </footer>
    </div>

    <!-- DANE DO QUIZU -->
    <script>
        const quizData = [
            {
                question: "Co to jest BOLA (Broken Object Level Authorization) w kontek≈õcie API?",
                options: [
                    "B≈ÇƒÖd polegajƒÖcy na rzucaniu pi≈ÇkƒÖ.",
                    "To inna nazwa na IDOR (Insecure Direct Object Reference). Sytuacja, gdy API pozwala na dostƒôp do obiektu (np. /orders/5) bez sprawdzenia, czy u≈ºytkownik jest jego w≈Ça≈õcicielem.",
                    "B≈ÇƒÖd w autoryzacji tokena JWT.",
                    "Przepe≈Çnienie bufora."
                ],
                correct: 1,
                explanation: "BOLA to nr 1 na li≈õcie OWASP API Security. To sytuacja, gdy backend ufa ID podanemu w URL, ignorujƒÖc uprawnienia u≈ºytkownika."
            },
            {
                type: "scenario",
                question: "Wysy≈Çasz ≈ºƒÖdanie rejestracji: {\"user\": \"ja\", \"pass\": \"123\"}. Atakujesz dodajƒÖc pole: {\"user\": \"ja\", \"pass\": \"123\", \"role\": \"admin\"}. Serwer tworzy konto admina. Jak nazywa siƒô ta podatno≈õƒá?",
                options: [
                    "SQL Injection",
                    "Mass Assignment (lub Auto-Binding)",
                    "XSS",
                    "CSRF"
                ],
                correct: 1,
                explanation: "Mass Assignment wystƒôpuje, gdy framework automatycznie przypisuje dane z JSON-a wej≈õciowego do p√≥l w bazie danych, w tym do p√≥l chronionych (jak 'role' czy 'balance')."
            },
            {
                question: "Jaki kod HTTP powinien zwr√≥ciƒá serwer, gdy przekroczysz limit zapyta≈Ñ (Rate Limit)?",
                options: [
                    "200 OK",
                    "404 Not Found",
                    "429 Too Many Requests",
                    "500 Internal Server Error"
                ],
                correct: 2,
                explanation: "429 to standardowy kod informujƒÖcy klienta: 'Zwolnij, wysy≈Çasz za du≈ºo ≈ºƒÖda≈Ñ'. Brak tego kodu przy brute-force to czerwona flaga."
            },
            {
                question: "Co to jest 'Excessive Data Exposure' (Nadmierne ujawnianie danych)?",
                options: [
                    "Sytuacja, gdy API zwraca pe≈Çny obiekt (np. z hashem has≈Ça, adresem), liczƒÖc na to, ≈ºe frontendowa aplikacja (React/Vue) ukryje te dane przed u≈ºytkownikiem.",
                    "Wyciek bazy danych SQL.",
                    "Wy≈õwietlanie reklam.",
                    "Zbyt d≈Çugie logi serwera."
                ],
                correct: 0,
                explanation: "To czƒôsty b≈ÇƒÖd. Deweloperzy my≈õlƒÖ: 'Frontend tego nie wy≈õwietla, wiƒôc jest bezpiecznie'. Pentester patrzy w Burp Suite i widzi JSON z danymi wra≈ºliwymi."
            },
            {
                question: "Dlaczego u≈ºywanie sekwencyjnych ID (np. /users/100, /users/101) jest ryzykowne w API?",
                options: [
                    "Bo zajmuje ma≈Ço miejsca.",
                    "Bo pozwala na ≈ÇatwƒÖ enumeracjƒô (wyliczenie) wszystkich zasob√≥w. AtakujƒÖcy mo≈ºe w pƒôtli ≈õciƒÖgnƒÖƒá ca≈ÇƒÖ bazƒô danych, je≈õli znajdzie BOLA/IDOR.",
                    "Bo bazy danych tego nie lubiƒÖ.",
                    "Bo to stary standard."
                ],
                correct: 1,
                explanation: "Losowe ID (np. UUID) utrudniajƒÖ atakujƒÖcemu zgadywanie innych zasob√≥w. Sekwencyjne ID to zaproszenie do scrapowania danych."
            },
            {
                type: "scenario",
                question: "Testujesz API. Endpoint GET /api/admin/users zwraca 403 Forbidden. Ale endpoint POST /api/admin/users/delete (bez sprawdzania uprawnie≈Ñ) dzia≈Ça i usuwa u≈ºytkownika. Co to za b≈ÇƒÖd?",
                options: [
                    "Function Level Authorization Bypass (Broken Function Level Authorization).",
                    "XSS.",
                    "Mass Assignment.",
                    "Rate Limiting."
                ],
                correct: 0,
                explanation: "Programi≈õci czƒôsto pamiƒôtajƒÖ o zabezpieczeniu 'widok√≥w' (GET), ale zapominajƒÖ o 'akcjach' (POST/PUT/DELETE) lub ukrytych endpointach administracyjnych."
            },
            {
                question: "Kt√≥ra metoda HTTP jest najczƒô≈õciej u≈ºywana do AKTUALIZACJI zasob√≥w w REST API?",
                options: [
                    "GET",
                    "POST",
                    "PUT lub PATCH",
                    "TRACE"
                ],
                correct: 2,
                explanation: "PUT zazwyczaj nadpisuje ca≈Çy zas√≥b, a PATCH aktualizuje tylko wybrane pola. Obie metody sƒÖ krytyczne pod kƒÖtem testowania Mass Assignment."
            },
            {
                question: "Dlaczego tokeny API nie powinny byƒá przesy≈Çane w URL (np. ?api_key=123)?",
                options: [
                    "Bo URL jest brzydki.",
                    "Bo URL (wraz z parametrami) zapisuje siƒô w historii przeglƒÖdarki, logach serwer√≥w proxy i serwer√≥w WWW, co prowadzi do wycieku tokena.",
                    "Bo URL ma limit d≈Çugo≈õci.",
                    "Bo to spowalnia API."
                ],
                correct: 1,
                explanation: "Sekrety (tokeny, klucze) powinny byƒá przesy≈Çane w nag≈Ç√≥wkach (Authorization: Bearer) lub rzadziej w ciele POST, ale nigdy w URL."
            },
            {
                type: "scenario",
                question: "API zwraca b≈ÇƒÖd: 'SQL syntax error near...'. Co to oznacza?",
                options: [
                    "B≈ÇƒÖd konfiguracji serwera.",
                    "Podatno≈õƒá na SQL Injection (API Injection). API nie filtruje danych wej≈õciowych przed wys≈Çaniem ich do bazy.",
                    "Brak pamiƒôci RAM.",
                    "B≈ÇƒÖd certyfikatu SSL."
                ],
                correct: 1,
                explanation: "API te≈º sƒÖ podatne na SQL Injection! Je≈õli JSON input trafia do zapytania SQL bez sanityzacji, efekt jest ten sam co w zwyk≈Çym formularzu."
            },
            {
                question: "Jak najlepiej zabezpieczyƒá siƒô przed Mass Assignment?",
                options: [
                    "U≈ºywaƒá DTO (Data Transfer Objects) i whitelistingu p√≥l. Jawnie okre≈õlaƒá, kt√≥re pola z JSON-a mogƒÖ byƒá zapisane w bazie.",
                    "Zablokowaƒá metodƒô PUT.",
                    "U≈ºywaƒá tylko XML.",
                    "Szyfrowaƒá JSON."
                ],
                correct: 0,
                explanation: "Nigdy nie u≈ºywaj funkcji typu `User.create(request.body)`. Zawsze rƒôcznie mapuj pola: `user.name = req.body.name`, `user.email = req.body.email`."
            }
        ];
    </script>

    <script src="quiz.js"></script>

</body>


</html>
