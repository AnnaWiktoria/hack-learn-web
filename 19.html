<!DOCTYPE html>
<html lang="pl">
<head>
    
 <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AnnaWiktoria">
    <meta name="copyright" content="AnnaWiktoria">
    <meta name="description" content="Interaktywny kurs bezpieczestwa aplikacji webowych. Licencja CC BY-NC-SA.">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com; 
               script-src 'self' 'unsafe-inline'; 
               img-src 'self' data:;">

    <title>Kurs bezpieczestwa aplikacji webowych - Lekcja 19: Micro-Labs</title>
      
      <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">


    <style>
        /* Akcent: Blueprint Blue (Architecture / Analysis) */
        :root {
            --accent: #2962ff;
            --accent-glow: rgba(41, 98, 255, 0.3);
        }
        
        /* Style dla Micro-Lab贸w */
        .lab-container {
            font-family: 'JetBrains Mono', monospace;
            background: #050505;
            border: 1px solid #333;
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .lab-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--accent);
            color: #fff;
            font-size: 0.7rem;
            padding: 2px 8px;
            font-weight: bold;
        }

        .highlight-area {
            color: #ffd600;
            border-bottom: 1px dashed #ffd600;
            cursor: help;
        }
        
        .req-method { color: #00e5ff; }
        .req-url { color: #fff; }
        .req-header { color: #aaa; }
        .req-val { color: #2962ff; font-weight: bold;}
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>MICRO-LABS: ANALYSIS</h1>
        <p>MODU 19: Analiza powierzchni ataku, Identyfikacja parametr贸w i Trust Boundaries</p>
    </header>

    <!-- WSTP -->
    <section>
        <h2>> CEL: MYLE ZANIM KLIKNIESZ</h2>
        <p>Najwikszy bd pocztkujcych? Uruchamianie skaner贸w na olep. W tych laboratoriach wiczymy <strong>oko analityka</strong>.</p>
        <p>Nie szukasz exploita. Szukasz <strong>potencjau</strong>.</p>
    </section>

    <!-- LAB 1: API REQUEST -->
    <section>
        <h2>> LAB 01: API ORDER FLOW</h2>
        <div class="card">
            <h3>KONTEKST:</h3>
            <p>Jeste zalogowany jako zwyky u偶ytkownik. Chcesz zo偶y zam贸wienie. Przechwytujesz taki request:</p>
            
            <div class="lab-container">
                <span class="lab-badge">HTTP REQUEST</span>
                <span class="req-method">POST</span> <span class="req-url">/api/v1/orders/create</span> HTTP/1.1<br>
                <span class="req-header">Host:</span> shop.example.com<br>
                <span class="req-header">Authorization:</span> Bearer eyJhbGci...<br>
                <span class="req-header">Content-Type:</span> application/json<br>
                <br>
                {<br>
                &nbsp;&nbsp;"user_id": <span class="req-val">1055</span>,<br>
                &nbsp;&nbsp;"cart_id": "c_998877",<br>
                &nbsp;&nbsp;"items": [<br>
                &nbsp;&nbsp;&nbsp;&nbsp;{ "id": 55, "price": <span class="req-val">100.00</span>, "qty": 1 }<br>
                &nbsp;&nbsp;],<br>
                &nbsp;&nbsp;"promo_code": <span class="req-val">null</span>,<br>
                &nbsp;&nbsp;"status": <span class="req-val">"PENDING"</span><br>
                }
            </div>

            <h3>ZADANIE ANALITYCZNE:</h3>
            <p>Patrzc na powy偶szy kod, kt贸re parametry s najbardziej podejrzane (High Priority) do test贸w rcznych?</p>
            <ul>
                <li><strong>user_id:</strong> Dlaczego klient wysya ID? Czy mog zo偶y zam贸wienie dla ID 1056? (IDOR / Masquerading)</li>
                <li><strong>price:</strong> Czy backend przelicza cen, czy ufa temu co wysaem? (Business Logic - Price Manipulation)</li>
                <li><strong>status:</strong> A co jeli wyl od razu "PAID"? (Mass Assignment / Logic Flaw)</li>
            </ul>
        </div>
    </section>

    <!-- LAB 2: PROFILE UPDATE -->
    <section>
        <h2>> LAB 02: PROFILE PICTURE</h2>
        <div class="card">
            <h3>KONTEKST:</h3>
            <p>Funkcja zmiany awatara. U偶ytkownik podaje URL do obrazka.</p>
            
            <div class="lab-container">
                <span class="lab-badge">PHP CODE SNIPPET</span>
                $url = $_POST['avatar_url'];<br>
                <br>
                <span class="comment">// Pobieranie pliku</span><br>
                $image = <span class="highlight">file_get_contents($url)</span>;<br>
                <br>
                <span class="comment">// Zapisywanie na dysku</span><br>
                file_put_contents("uploads/" . $user_id . ".jpg", $image);
            </div>

            <h3>ANALIZA RYZYKA:</h3>
            <p>Widzisz funkcj <code>file_get_contents($url)</code>. Co Ci przychodzi do gowy?</p>
            <ol>
                <li><strong>SSRF:</strong> Co jeli w <code>$url</code> podam <code>http://localhost:80</code> albo <code>http://169.254.169.254</code>? Serwer to pobierze.</li>
                <li><strong>LFI/File Read:</strong> Co jeli podam <code>file:///etc/passwd</code>? Funkcja to odczyta i zapisze jako `.jpg`. Jeli otworz ten obrazek w notatniku - zobacz plik systemowy.</li>
                <li><strong>DoS:</strong> Co jeli podam link do pliku 10GB?</li>
            </ol>
        </div>
    </section>

    <!-- CHECKLIST -->
    <section>
        <h2>AUDIT NOTEBOOK </h2>
        <div class="card checklist-card">
            <div class="checklist-item">
                <span class="check-icon"></span>
                <div><strong>Zasada #1:</strong> Jeli dane przychodz w Request (JSON/Body) -> sprawd藕 Mass Assignment i Logic Flaws.</div>
            </div>
            <div class="checklist-item">
                <span class="check-icon"></span>
                <div><strong>Zasada #2:</strong> Jeli dane przychodz w URL (ID) -> sprawd藕 IDOR (AuthZ).</div>
            </div>
            <div class="checklist-item">
                <span class="check-icon"></span>
                <div><strong>Zasada #3:</strong> Jeli dane to URL/cie偶ka -> sprawd藕 SSRF i LFI.</div>
            </div>
        </div>
    </section>

    <!-- QUIZ -->
    <section id="quiz-section">
        <h2> AUDYT: PODEJMIJ DECYZJ</h2>
        <div id="quiz-container"></div>
    </section>

    <footer>
        <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Hack & Learn: Web Edition | Modu 19</p>
    </footer>
</div>

<!-- DANE DO QUIZU -->
<script>
    const quizData = [
        {
            type: "scenario",
            question: "Analizujesz request: `POST /api/reset-password { 'email': 'admin@corp.com' }`. Odpowied藕 serwera: `200 OK { 'status': 'sent', 'reset_token': '123456' }`. Gdzie le偶y krytyczny bd?",
            options: [
                "Brak szyfrowania SSL.",
                "Information Disclosure / Logic Flaw. Serwer zwraca token resetujcy w odpowiedzi do klienta (czyli do Ciebie), zamiast wysa go tylko na maila. To pozwala przej ka偶de konto.",
                "Brak parametru CSRF.",
                "Email jest widoczny."
            ],
            correct: 1,
            explanation: "To bd typu 'Response Disclosure'. Jeli API zwraca token w odpowiedzi HTTP, nie musisz mie dostpu do skrzynki ofiary, 偶eby zresetowa jej haso."
        },
        {
            type: "scenario",
            question: "Widzisz endpoint `GET /download?filename=report.pdf`. Jakie 3 wektory ataku sprawdzasz w pierwszej kolejnoci (wg priorytetu)?",
            options: [
                "1. XSS, 2. CSRF, 3. Clickjacking",
                "1. Path Traversal (LFI), 2. XSS (w nazwie pliku), 3. SQLi (jeli nazwa idzie do bazy)",
                "1. Brute Force, 2. DDoS, 3. Phishing",
                "1. SSRF, 2. XXE, 3. RCE"
            ],
            correct: 1,
            explanation: "Parametr `filename` to klasyczny cel dla Path Traversal (`../../etc/passwd`). XSS jest mo偶liwy (Reflected), jeli nazwa wraca w nag贸wku Content-Disposition."
        },
        {
            type: "scenario",
            question: "Masz funkcj 'Zapro znajomego'. Wpisujesz email, a serwer wysya wiadomo. Jak sprawdzisz, czy funkcja jest podatna na 'Email Injection' lub spamowanie?",
            options: [
                "Wpisz `admin`.",
                "Spr贸buj wpisa 1000 adres贸w email oddzielonych przecinkami lub u偶y Burp Intruder do wysania 1000 偶da do tej samej osoby (Email Bombing).",
                "Spr贸buj wgra plik .exe.",
                "Wpisz SQL Injection."
            ],
            correct: 1,
            explanation: "Funkcje wysyajce maile to idealny wektor do DoS lub nkania u偶ytkownik贸w. Audytor musi sprawdzi Rate Limiting."
        },
        {
            type: "scenario",
            question: "API: `PUT /users/100` z body `{'role': 'user', 'banned': false}`. Backend ufa tym danym. Jak kategori bdu wpiszesz do raportu?",
            options: [
                "Injection",
                "Mass Assignment (lub Broken Function Level Authorization, jeli zmienisz rol na admina).",
                "Security Misconfiguration",
                "Logging Failures"
            ],
            correct: 1,
            explanation: "Jeli mo偶esz zmieni pole 'banned' na false lub 'role' na admina, bo backend przyjmuje cay obiekt JSON - to podrcznikowy Mass Assignment."
        },
        {
            type: "scenario",
            question: "Aplikacja w React przechowuje stan `isAdmin: true` w `localStorage`. Jak ocenisz to w raporcie?",
            options: [
                "Critical - Natychmiastowe przejcie serwera.",
                "High/Medium - Client-Side Authorization Flaw. Jeli API nie weryfikuje roli po stronie serwera, jest to Critical. Jeli weryfikuje - to 'tylko' bad practice (Information Disclosure/UX flaw).",
                "Info - To standardowa praktyka.",
                "Low - Tylko wizualny bd."
            ],
            correct: 1,
            explanation: "Wa偶ne rozr贸偶nienie: Czy zmiana w localStorage daje faktyczny dostp do danych (Critical), czy tylko pokazuje puste menu (Low/Medium)? Audytor musi to zweryfikowa."
        }
    ];
</script>

<script src="quiz.js"></script>

</body>
</html>
