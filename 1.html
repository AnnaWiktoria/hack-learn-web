<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AnnaWiktoria">
    <meta name="copyright" content="AnnaWiktoria">
    <meta name="description" content="Interaktywny kurs bezpiecze≈Ñstwa aplikacji webowych. Licencja CC BY-NC-SA.">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com; 
               script-src 'self' 'unsafe-inline'; 
               img-src 'self' data:;">

    <title>Kurs bezpiecze≈Ñstwa aplikacji webowych - Lekcja 01: Metody HTTP</title>

    <!-- Podpiƒôcie g≈Ç√≥wnego stylu -->
    <link rel="stylesheet" href="style.css">

    <style>
        /* Indywidualny akcent dla tej lekcji: Cyan (Klimat HTTP/Web) */
        :root {
            --accent: #00e5ff;
            --accent-glow: rgba(0, 229, 255, 0.3);
        }

        .http-part {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 5px;
            display: block;
        }

        .req-line {
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>METODY HTTP</h1>
            <p>MODU≈Å 01: Budowa protoko≈Çu, ≈ºƒÖdania, odpowiedzi i metody</p>
        </header>

        <!-- SEKCJA 0: WPROWADZENIE DO HTTP (NOWA) -->
        <section>
            <h2>> PROTOK√ì≈Å HTTP</h2>
            <p><strong>HTTP (Hypertext Transfer Protocol)</strong> to jƒôzyk, w kt√≥rym przeglƒÖdarka (Klient) rozmawia z
                serwerem. Jest to protok√≥≈Ç tekstowy i bezstanowy (stateless).</p>

            <div class="card">
                <h3>CYKL ≈ªYCIA KOMUNIKACJI</h3>
                <ol>
                    <li><strong>KLIENT (Ty):</strong> Wysy≈Ça <em>≈ªƒÖdanie (Request)</em> ‚Äì np. "Daj mi plik index.html".
                    </li>
                    <li><strong>SERWER:</strong> Przetwarza ≈ºƒÖdanie (szuka pliku, pyta bazƒô danych).</li>
                    <li><strong>SERWER:</strong> Odsy≈Ça <em>Odpowied≈∫ (Response)</em> ‚Äì np. "Oto tre≈õƒá pliku" lub "Nie
                        znaleziono".</li>
                </ol>
            </div>
        </section>

        <!-- SEKCJA 0.5: ANATOMIA (NOWA) -->
        <section>
            <h2>> ANATOMIA ≈ªƒÑDANIA (REQUEST)</h2>
            <p>To wysy≈Ça Twoja przeglƒÖdarka (lub Burp Suite). Sk≈Çada siƒô z 3 czƒô≈õci:</p>

            <div class="card">
                <span class="http-part">// 1. Linia startowa (Request Line): METODA + ≈öCIE≈ªKA + WERSJA</span>
                <pre
                    class="req-line"><code><span class="method-badge m-get">GET</span> <span class="highlight">/produkty/laptop?id=5</span> <span class="param">HTTP/1.1</span></code></pre>

                <span class="http-part">// 2. Nag≈Ç√≥wki (Headers): KLUCZ: WARTO≈öƒÜ</span>
                <pre><code>Host: sklep.example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0...)
Accept: text/html,application/json
Cookie: session_id=xyz123</code></pre>

                <span class="http-part">// 3. Cia≈Ço (Body) - oddzielone pustƒÖ liniƒÖ (czƒôsto puste przy GET)</span>
                <pre><code><span class="comment">(pusta linia)</span>
<span class="comment">(brak danych w metodzie GET)</span></code></pre>
            </div>

            <h2>> ANATOMIA ODPOWIEDZI (RESPONSE)</h2>
            <p>To odsy≈Ça serwer:</p>

            <div class="card">
                <span class="http-part">// 1. Linia statusu: WERSJA + KOD + OPIS</span>
                <pre
                    class="req-line"><code><span class="param">HTTP/1.1</span> <span class="status-badge s-2xx">200</span> <span class="highlight">OK</span></code></pre>

                <span class="http-part">// 2. Nag≈Ç√≥wki odpowiedzi</span>
                <pre><code>Server: Apache/2.4.41
Content-Type: text/html; charset=UTF-8
Content-Length: 1234</code></pre>

                <span class="http-part">// 3. Cia≈Ço (Body) - w≈Ça≈õciwa tre≈õƒá</span>
                <pre><code><span class="comment">(pusta linia)</span>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;h1&gt;Witaj w sklepie!&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
            </div>
        </section>

        <!-- SEKJA 1: METODY -->
        <section>
            <h2>> DEFINICJA OPERACJI (METODY)</h2>
            <p>Metoda HTTP (pierwsze s≈Çowo w ≈ºƒÖdaniu) okre≈õla intencjƒô operacji. Zrozumienie, co metoda
                <strong>powinna</strong> robiƒá, a co <strong>faktycznie</strong> robi, jest kluczem do znalezienia wielu
                b≈Çƒôd√≥w logicznych.
            </p>

            <div class="card">
                <h3>LISTA METOD</h3>
                <ul>
                    <li style="margin-bottom:10px;"><span class="method-badge m-get">GET</span> <strong>Pobierz
                            dane.</strong> Nie powinna zmieniaƒá stanu serwera (parametry w URL).</li>
                    <li style="margin-bottom:10px;"><span class="method-badge m-post">POST</span> <strong>Wy≈õlij /
                            Utw√≥rz.</strong> Przetwarza dane ukryte w Body. Zmienia stan.</li>
                    <li style="margin-bottom:10px;"><span class="method-badge m-put">PUT</span>
                        <strong>Nadpisz.</strong> Zastƒôpuje ca≈Çy zas√≥b pod danym URL.
                    </li>
                    <li style="margin-bottom:10px;"><span class="method-badge m-patch">PATCH</span>
                        <strong>Edytuj.</strong> Zmienia fragment zasobu.
                    </li>
                    <li style="margin-bottom:10px;"><span class="method-badge m-delete">DELETE</span>
                        <strong>Usu≈Ñ.</strong> Kasuje zas√≥b.
                    </li>
                    <li><span class="method-badge m-options">OPTIONS</span> <strong>Zapytaj.</strong> Sprawdza dozwolone
                        metody i CORS.</li>
                </ul>
            </div>
        </section>

        <!-- SEKCJA 2: IDEMPOTENCJA -->
        <section>
            <h2>> IDEMPOTENCJA & BEZPIECZE≈ÉSTWO</h2>
            <p>To kluczowe pojƒôcia, kt√≥rych brakuje 90% poczƒÖtkujƒÖcych. Ich naruszenie prowadzi do b≈Çƒôd√≥w CSRF i Logic
                Flaws.</p>

            <div class="card">
                <ul>
                    <li><strong>Safe method (Bezpieczna):</strong> Tylko odczyt. Wywo≈Çanie nie zmienia nic w bazie
                        danych.<br>
                        <em class="comment">// Przyk≈Çady: GET, HEAD, OPTIONS.</em>
                    </li>
                    <li><strong>Idempotent method (Idempotentna):</strong> Wielokrotne wykonanie tego samego ≈ºƒÖdania
                        daje ten sam efekt ko≈Ñcowy, co jednokrotne.<br>
                        <em class="comment">// Przyk≈Çady: DELETE (jak usuniesz plik raz, to go nie ma; jak spr√≥bujesz
                            drugi raz, nadal go nie ma), PUT.</em>
                    </li>
                </ul>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Metoda</th>
                        <th>Safe (Read-only)</th>
                        <th>Idempotent</th>
                        <th>Ryzyko Security</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="method-badge m-get">GET</span></td>
                        <td>‚úÖ TAK</td>
                        <td>‚úÖ TAK</td>
                        <td>Sensitive Data in URL, CSRF (je≈õli ≈∫le u≈ºyta)</td>
                    </tr>
                    <tr>
                        <td><span class="method-badge m-post">POST</span></td>
                        <td>‚ùå NIE</td>
                        <td>‚ùå NIE</td>
                        <td>Brak token√≥w CSRF, B≈Çƒôdy logiki biznesowej</td>
                    </tr>
                    <tr>
                        <td><span class="method-badge m-put">PUT</span></td>
                        <td>‚ùå NIE</td>
                        <td>‚úÖ TAK</td>
                        <td>IDOR, Mass Assignment</td>
                    </tr>
                    <tr>
                        <td><span class="method-badge m-delete">DELETE</span></td>
                        <td>‚ùå NIE</td>
                        <td>‚úÖ TAK</td>
                        <td>IDOR (usuwanie cudzych danych)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- SEKCJA 3: PERSPEKTYWA PENTESTERA -->
        <section>
            <h2>> WEKTORY ATAKU</h2>
            <p>Jak wykorzystujemy metody HTTP w praktyce?</p>

            <div class="card">
                <h3>SCENARIUSZ 1: GET zmieniajƒÖcy stan (CSRF)</h3>
                <p>Programista stworzy≈Ç endpoint: <code>GET /delete?id=5</code>.</p>
                <pre><code><span class="comment"># Payload wys≈Çany ofierze (np. na forum w obrazku)</span>
&lt;img src="https://bank.com/delete?id=5"&gt;</code></pre>
                <p><strong>Skutek:</strong> PrzeglƒÖdarka ofiary pr√≥buje pobraƒá "obrazek", wykonujƒÖc ≈ºƒÖdanie GET. Konto
                    zostaje usuniƒôte bez wiedzy u≈ºytkownika. <br><span class="highlight">Wniosek: GET nigdy nie powinien
                        zmieniaƒá stanu!</span></p>
            </div>

            <div class="card">
                <h3>SCENARIUSZ 2: IDOR na REST API</h3>
                <p>API czƒôsto u≈ºywa schematu <code>/users/{id}</code>. Jeste≈õ zalogowany jako User A (ID: 100).</p>
                <pre><code><span class="method-badge m-put">PUT</span> /users/<span class="highlight">105</span> HTTP/1.1
Host: api.site.com
Cookie: session_id=... (Ty masz ID 100)

{"email": "hacker@evil.com"}</code></pre>
                <p><strong>B≈ÇƒÖd:</strong> Serwer sprawdza, czy jeste≈õ zalogowany, ale NIE sprawdza, czy masz prawo
                    edytowaƒá ID 105. PrzejƒÖ≈Çe≈õ konto innego u≈ºytkownika.</p>
            </div>

            <div class="card">
                <h3>SCENARIUSZ 3: Metoda OPTIONS</h3>
                <p>Widzisz API. Pytasz serwer: "Co tu wolno?".</p>
                <pre><code><span class="method-badge m-options">OPTIONS</span> /api/admin HTTP/1.1
Host: target.com</code></pre>
                <p>Odpowied≈∫ serwera:</p>
                <pre><code>HTTP/1.1 200 OK
Allow: GET, POST, <span class="highlight">DELETE</span>
Access-Control-Allow-Origin: *</code></pre>
                <p><strong>Znalezisko:</strong> Istnieje metoda DELETE (mo≈ºe ukryta?) oraz konfiguracja CORS pozwala na
                    dostƒôp z ka≈ºdej domeny.</p>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section>
            <h2>CHECKLISTA / RED FLAGS</h2>
            <div class="card checklist-card">
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>GET modyfikujƒÖcy dane:</strong> Zmiana has≈Ça lub usuwanie danych przez GET to
                        zaproszenie do CSRF.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Wra≈ºliwe dane w URL:</strong> Tokeny API lub has≈Ça w parametrach GET (zostajƒÖ w
                        historii przeglƒÖdarki i logach proxy).</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>API bez autoryzacji na PUT/DELETE:</strong> Programi≈õci czƒôsto chroniƒÖ GET, a
                        zapominajƒÖ o metodach edycji.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Security by Obscurity (POST):</strong> U≈ºywanie POST do pobierania danych tylko po to,
                        by "ukryƒá" parametry w Body. To nie dzia≈Ça na pentester√≥w.</div>
                </div>
            </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz-section">
            <h2>üéì TEST WIEDZY</h2>
            <!-- Kontener na pytania - wype≈Çniany automatycznie przez quiz.js -->
            <div id="quiz-container"></div>
        </section>

        <footer>
            <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Hack & Learn: Web Edition | Modu≈Ç
                01</p>
        </footer>
    </div>

    <!-- DANE DO QUIZU -->
    <script>
        const quizData = [
            {
                question: "Co oznacza, ≈ºe metoda HTTP jest 'idempotentna'?",
                options: [
                    "Jest zaszyfrowana i bezpieczna przed pods≈Çuchaniem.",
                    "Nie zmienia stanu serwera (jest tylko do odczytu).",
                    "Wielokrotne wykonanie tego samego ≈ºƒÖdania daje ten sam efekt ko≈Ñcowy, co jednokrotne.",
                    "Wymaga uwierzytelnienia przy ka≈ºdym zapytaniu."
                ],
                correct: 2,
                explanation: "Idempotencja gwarantuje przewidywalno≈õƒá. Je≈õli usuniesz plik raz (DELETE), nie ma go. Je≈õli wy≈õlesz to ≈ºƒÖdanie jeszcze 5 razy, pliku nadal nie ma - stan systemu siƒô nie pogarsza."
            },
            {
                question: "Kt√≥ra z poni≈ºszych metod jest technicznie 'Safe' (Bezpieczna/Tylko do odczytu)?",
                options: [
                    "POST",
                    "DELETE",
                    "PUT",
                    "OPTIONS"
                ],
                correct: 3,
                explanation: "Metody Safe (GET, HEAD, OPTIONS) s≈Çu≈ºƒÖ tylko do pobierania informacji i nie powinny modyfikowaƒá danych na serwerze."
            },
            {
                type: "scenario",
                question: "Podczas rekonesansu odkrywasz URL: 'GET /user/delete?id=123'. Dlaczego jest to b≈ÇƒÖd bezpiecze≈Ñstwa?",
                options: [
                    "To prawid≈Çowa implementacja REST.",
                    "Naruszenie zasad protoko≈Çu. GET nie powinien zmieniaƒá stanu. Aplikacja jest podatna na prosty atak CSRF.",
                    "To jest SQL Injection.",
                    "B≈ÇƒÖd typu Buffer Overflow."
                ],
                correct: 1,
                explanation: "U≈ºycie GET do usuwania danych pozwala atakujƒÖcemu spreparowaƒá link (np. w tagu img), kt√≥ry nie≈õwiadomie klikniƒôty przez ofiarƒô, wykona akcjƒô usuniƒôcia konta."
            },
            {
                question: "Dlaczego przesy≈Çanie has≈Ça w parametrach URL metody GET jest b≈Çƒôdem (nawet przy HTTPS)?",
                options: [
                    "Bo HTTPS nie szyfruje URL.",
                    "Bo URL (z parametrami) zostaje zapisany w historii przeglƒÖdarki, logach serwera i nag≈Ç√≥wkach Referer.",
                    "Bo GET ma limit 8 znak√≥w.",
                    "Bo Burp Suite tego nie widzi."
                ],
                correct: 1,
                explanation: "Mimo ≈ºe HTTPS szyfruje transmisjƒô, pe≈Çny URL jest logowany w wielu miejscach w postaci otwartego tekstu (plain text)."
            },
            {
                type: "scenario",
                question: "Testujesz API. Endpoint 'PUT /users/100' pozwala Ci zmieniƒá email. Zmieniasz ID w URL na 101 i te≈º dzia≈Ça (zmieniasz dane innego usera). Co znalaz≈Çe≈õ?",
                options: [
                    "XSS (Cross-Site Scripting)",
                    "IDOR (Insecure Direct Object Reference)",
                    "CSRF (Cross-Site Request Forgery)",
                    "RCE (Remote Code Execution)"
                ],
                correct: 1,
                explanation: "IDOR wystƒôpuje, gdy aplikacja ufa numerowi ID podanemu przez u≈ºytkownika w URL bez sprawdzenia uprawnie≈Ñ do tego konkretnego obiektu."
            },
            {
                question: "Do czego pentester u≈ºywa metody OPTIONS?",
                options: [
                    "Do resetowania has≈Ça admina.",
                    "Do sprawdzenia obs≈Çugiwanych metod HTTP i konfiguracji CORS (Access-Control-Allow-Origin).",
                    "Do wgrywania plik√≥w.",
                    "Do wywo≈Çania b≈Çƒôdu 500."
                ],
                correct: 1,
                explanation: "OPTIONS to zwiad. Pytasz serwer: 'Co mi wolno?'. Odpowied≈∫ mo≈ºe ujawniƒá np. w≈ÇƒÖczone metody DELETE czy niebezpiecznie lu≈∫ny CORS."
            },
            {
                question: "Czym r√≥≈ºni siƒô PUT od PATCH?",
                options: [
                    "PUT nadpisuje ca≈Çy zas√≥b, PATCH modyfikuje fragment.",
                    "PUT s≈Çu≈ºy do tworzenia, PATCH do usuwania.",
                    "Nie ma r√≥≈ºnicy.",
                    "PATCH jest bezpieczniejszy bo jest szyfrowany podw√≥jnie."
                ],
                correct: 0,
                explanation: "PUT oczekuje pe≈Çnego obiektu (zastƒôpuje stary nowym). PATCH oczekuje instrukcji zmian (np. zmie≈Ñ tylko pole 'email')."
            },
            {
                type: "scenario",
                question: "Programista ukry≈Ç parametry wyszukiwania w ciele ≈ºƒÖdania POST (/search), ≈ºeby URL by≈Ç 'czysty' i u≈ºytkownik nie widzia≈Ç parametr√≥w. Jak to ocenisz?",
                options: [
                    "≈öwietna praktyka bezpiecze≈Ñstwa.",
                    "Security by Obscurity. Nie poprawia bezpiecze≈Ñstwa (Burp i tak to widzi), a ≈Çamie semantykƒô HTTP.",
                    "Krytyczny b≈ÇƒÖd pozwalajƒÖcy na przejƒôcie serwera.",
                    "To jedyny spos√≥b na obs≈Çugƒô polskich znak√≥w."
                ],
                correct: 1,
                explanation: "Ukrycie danych w POST nie czyni ich niewidocznymi dla pentestera. Dodatkowo POST nie jest cache'owany tak jak GET, co jest b≈Çƒôdem przy wyszukiwarkach."
            },
            {
                question: "Gdzie w surowym ≈ºƒÖdaniu HTTP znajduje siƒô nag≈Ç√≥wek Host?",
                options: [
                    "W ciele (Body).",
                    "W pierwszej linii (Request Line).",
                    "W sekcji nag≈Ç√≥wk√≥w (2. czƒô≈õƒá), jest obowiƒÖzkowy w HTTP/1.1.",
                    "Jest generowany losowo."
                ],
                correct: 2,
                explanation: "Host: example.com jest kluczowym nag≈Ç√≥wkiem wymaganym przez standard HTTP/1.1. Czƒôsto testuje siƒô go pod kƒÖtem Host Header Injection."
            },
            {
                type: "scenario",
                question: "Wysy≈Çasz ≈ºƒÖdanie: 'DELETE /file.txt'. Serwer odpowiada 200 OK. Wysy≈Çasz to samo ≈ºƒÖdanie ponownie. Jaki powinien byƒá stan serwera po drugim ≈ºƒÖdaniu?",
                options: [
                    "Plik powinien zostaƒá odzyskany.",
                    "Serwer powinien zwr√≥ciƒá b≈ÇƒÖd 500.",
                    "Stan serwera powinien pozostaƒá taki sam (plik nadal usuniƒôty).",
                    "Plik powinien zostaƒá zduplikowany."
                ],
                correct: 2,
                explanation: "Idempotencja oznacza, ≈ºe powtarzanie operacji nie zmienia wyniku. Plik usuniƒôty raz, pozostaje usuniƒôty."
            }
        ];
    </script>

    <!-- Logika Quizu -->
    <script src="quiz.js"></script>

</body>

</html>
