<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lekcja 08: SQL Injection - Kurs Pentestera</title>

    <link rel="stylesheet" href="style.css">

    <style>
        /* Akcent: Toxic Green (Code Injection / Matrix) */
        :root {
            --accent: #39ff14;
            --accent-glow: rgba(57, 255, 20, 0.3);
        }

        .sql-keyword {
            color: #ff0055;
            font-weight: bold;
        }

        /* SÅ‚owa kluczowe SQL */
        .sql-string {
            color: #ffd600;
        }

        /* Tekst w SQL */
        .sql-input {
            color: #39ff14;
            font-weight: bold;
            text-decoration: underline;
        }

        /* WstrzykniÄ™ty kod */
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>SQL INJECTION</h1>
            <p>MODUÅ 08: ' OR 1=1 -- // Przejmowanie bazy danych</p>
        </header>

        <!-- 1. MECHANIZM -->
        <section>
            <h2>> JAK TO DZIAÅA?</h2>
            <p>SQL Injection (SQLi) wystÄ™puje, gdy aplikacja bierze dane od uÅ¼ytkownika i <strong>skleja je</strong> z
                zapytaniem do bazy danych, zamiast je odseparowaÄ‡.</p>

            <div class="card">
                <h3>ANATOMIA ATAKU</h3>
                <p>WyobraÅº sobie kod logowania w PHP (zÅ‚y kod):</p>
                <pre><code>$sql = "SELECT * FROM users WHERE name = '" . <span class="highlight">$user</span> . "'";</code></pre>

                <p>JeÅ›li wpiszesz <code>admin</code>, zapytanie wyglÄ…da tak:</p>
                <pre><code>SELECT * FROM users WHERE name = '<span class="sql-string">admin</span>'</code></pre>

                <p>Ale jeÅ›li wpiszesz <code>admin' OR '1'='1</code>, zapytanie zmienia siÄ™ w:</p>
                <pre><code>SELECT * FROM users WHERE name = '<span class="sql-string">admin</span><span class="sql-input">' OR '1'='1</span>'</code></pre>

                <p><strong>Efekt:</strong> Baza danych sprawdza: "Czy nazwa to admin? NIE. Czy 1 rÃ³wna siÄ™ 1? TAK."
                    <br>Warunek jest speÅ‚niony dla kaÅ¼dego rekordu. JesteÅ› zalogowany.</p>
            </div>
        </section>

        <!-- 2. TYPY SQLi -->
        <section>
            <h2>> TYPY SQL INJECTION</h2>
            <p>Nie zawsze jest tak Å‚atwo. Czasem nie widzisz bÅ‚Ä™dÃ³w.</p>

            <div class="card">
                <h3>1. IN-BAND (CLASSIC)</h3>
                <p>Widzisz wyniki ataku bezpoÅ›rednio na stronie.</p>
                <ul>
                    <li><strong>Error-Based:</strong> Strona wyÅ›wietla bÅ‚Ä…d bazy danych (np. "SQL Syntax Error"), ktÃ³ry
                        zdradza strukturÄ™ bazy.</li>
                    <li><strong>UNION-Based:</strong> UÅ¼ywasz operatora <code>UNION SELECT</code>, aby dokleiÄ‡ wyniki z
                        innej tabeli do wynikÃ³w widocznych na stronie (np. wyÅ›wietlasz hasÅ‚a w miejscu tytuÅ‚Ã³w
                        artykuÅ‚Ã³w).</li>
                </ul>
            </div>

            <div class="card">
                <h3>2. BLIND (ÅšLEPE)</h3>
                <p>Strona nie pokazuje bÅ‚Ä™dÃ³w ani danych, ale reaguje inaczej na prawdÄ™ i faÅ‚sz.</p>
                <ul>
                    <li><strong>Boolean-Based:</strong> Pytasz bazy: <em>"Czy hasÅ‚o zaczyna siÄ™ na 'A'?"</em>
                        (<code>AND substring(pass,1,1)='A'</code>). JeÅ›li strona Å‚aduje siÄ™ normalnie -> TAK. JeÅ›li
                        brakuje elementu -> NIE.</li>
                    <li><strong>Time-Based:</strong> Pytasz: <em>"JeÅ›li jestem adminem, poczekaj 10 sekund"</em>
                        (<code>WAITFOR DELAY '0:0:10'</code>). JeÅ›li strona mieli 10 sekund -> JesteÅ› adminem.</li>
                </ul>
            </div>
        </section>

        <!-- 3. NARZÄ˜DZIA I OBRONA -->
        <section>
            <h2>> NARZÄ˜DZIA I OBRONA</h2>

            <div class="card">
                <h3>SQLMAP - AUTOMATYZACJA</h3>
                <p>To potÄ™Å¼ne narzÄ™dzie w terminalu. Wykrywa i eksploatuje wiÄ™kszoÅ›Ä‡ bÅ‚Ä™dÃ³w SQLi.</p>
                <pre><code>sqlmap -u "http://target.com/page?id=5" --dbs</code></pre>
                <p><span class="comment">// Komenda powyÅ¼ej sprÃ³buje wyciÄ…gnÄ…Ä‡ listÄ™ baz danych.</span></p>
            </div>

            <div class="card" style="border-color: var(--success);">
                <h3>JEDYNA SKUTECZNA OBRONA</h3>
                <p>Nie "filtrowanie znakÃ³w". Nie "Firewalle".</p>
                <p>Jedynym lekiem sÄ… <strong>Prepared Statements (Parametryzowane Zapytania)</strong>.</p>
                <pre><code><span class="comment">// Bezpieczny kod:</span>
$stmt = $pdo->prepare('SELECT * FROM users WHERE name = :name');
$stmt->execute(['name' => $userInput]);</code></pre>
                <p>W tym przypadku baza danych traktuje wejÅ›cie <strong>zawsze jako tekst</strong>, a nie kod
                    wykonywalny. Nawet <code>' OR 1=1</code> zostanie potraktowane jako dziwne imiÄ™ uÅ¼ytkownika.</p>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section>
            <h2>CHECKLISTA / RED FLAGS</h2>
            <div class="card checklist-card">
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>BÅ‚Ä…d 500 po wpisaniu apostrofu ( ' ):</strong> Najsilniejszy sygnaÅ‚, Å¼e zapytanie SQL
                        siÄ™ "rozjechaÅ‚o".</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Parametry ID w URL:</strong> `product.php?id=10`. ZmieÅ„ na `10-1`. JeÅ›li wyÅ›wietli
                        produkt 9 -> Baza wykonuje matematykÄ™ -> SQLi moÅ¼liwe.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Formularze wyszukiwania i logowania:</strong> To najczÄ™stsze punkty wejÅ›cia.</div>
                </div>
            </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz-section">
            <h2>ğŸ“ WERYFIKACJA WIEDZY</h2>
            <div id="quiz-container"></div>
        </section>

        <footer>
            <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Kurs Pentestera | ModuÅ‚ 08</p>
        </footer>
    </div>

    <!-- DANE DO QUIZU -->
    <script>
        const quizData = [
            {
                question: "Co to jest SQL Injection?",
                options: [
                    "BÅ‚Ä…d polegajÄ…cy na wstrzykniÄ™ciu zÅ‚oÅ›liwego kodu JavaScript do przeglÄ…darki.",
                    "BÅ‚Ä…d polegajÄ…cy na manipulacji zapytaniem do bazy danych poprzez nieodpowiednio przefiltrowane dane wejÅ›ciowe.",
                    "Atak polegajÄ…cy na zgadywaniu haseÅ‚.",
                    "PrzeciÄ…Å¼enie bazy danych duÅ¼Ä… liczbÄ… zapytaÅ„."
                ],
                correct: 1,
                explanation: "SQLi dzieje siÄ™, gdy aplikacja nie odrÃ³Å¼nia kodu SQL od danych uÅ¼ytkownika, pozwalajÄ…c atakujÄ…cemu zmieniÄ‡ logikÄ™ zapytania."
            },
            {
                question: "KtÃ³ry znak jest najczÄ™Å›ciej uÅ¼ywany do testowania (wywoÅ‚ywania bÅ‚Ä™du) w SQL Injection?",
                options: [
                    "Znak zapytania (?)",
                    "Pojedynczy apostrof (')",
                    "Wykrzyknik (!)",
                    "Kropka (.)"
                ],
                correct: 1,
                explanation: "Pojedynczy apostrof (') sÅ‚uÅ¼y w SQL do zamykania ciÄ…gÃ³w tekstowych. Wpisanie go czÄ™sto 'psuje' skÅ‚adniÄ™ zapytania, co powoduje bÅ‚Ä…d serwera."
            },
            {
                type: "scenario",
                question: "Widzisz panel logowania. Wpisujesz w pole login: admin' OR '1'='1 -- . Co prÃ³bujesz osiÄ…gnÄ…Ä‡?",
                options: [
                    "Chcesz usunÄ…Ä‡ bazÄ™ danych.",
                    "Chcesz obejÅ›Ä‡ uwierzytelnianie (Authentication Bypass) poprzez sprawienie, Å¼e warunek WHERE bÄ™dzie zawsze prawdziwy.",
                    "Chcesz wywoÅ‚aÄ‡ bÅ‚Ä…d XSS.",
                    "Chcesz zaszyfrowaÄ‡ hasÅ‚o."
                ],
                correct: 1,
                explanation: "PoniewaÅ¼ 1=1 jest zawsze prawdÄ…, a operator OR sprawia, Å¼e wystarczy jeden prawdziwy warunek, baza zwraca pierwszy rekord (zazwyczaj admina) i loguje CiÄ™."
            },
            {
                question: "Na czym polega 'Blind SQL Injection'?",
                options: [
                    "AtakujÄ…cy ma zawiÄ…zane oczy.",
                    "Aplikacja nie zwraca Å¼adnych danych ani bÅ‚Ä™dÃ³w z bazy, ale zachowuje siÄ™ inaczej w zaleÅ¼noÅ›ci od tego, czy zapytanie jest prawdziwe, czy faÅ‚szywe.",
                    "Atak dziaÅ‚a tylko w nocy.",
                    "Baza danych jest ukryta za firewallem."
                ],
                correct: 1,
                explanation: "W 'Å›lepym' ataku bawisz siÄ™ w 'ciepÅ‚o-zimno'. Zadajesz pytania Tak/Nie (np. czy hasÅ‚o zaczyna siÄ™ na 'A'?) i obserwujesz reakcjÄ™ aplikacji (czas Å‚adowania, dÅ‚ugoÅ›Ä‡ treÅ›ci)."
            },
            {
                question: "Jaki jest najskuteczniejszy sposÃ³b obrony przed SQL Injection?",
                options: [
                    "Filtrowanie sÅ‚Ã³w 'SELECT' i 'UNION'.",
                    "UÅ¼ywanie Prepared Statements (zapytaÅ„ parametryzowanych).",
                    "Szyfrowanie bazy danych.",
                    "Ukrywanie bÅ‚Ä™dÃ³w serwera."
                ],
                correct: 1,
                explanation: "Prepared Statements oddzielajÄ… strukturÄ™ zapytania od danych. Baza wie, Å¼e to, co wpisaÅ‚ uÅ¼ytkownik, to TYLKO tekst, a nie komenda SQL."
            },
            {
                type: "scenario",
                question: "Testujesz URL: sklep.php?id=10. Zmieniasz go na sklep.php?id=10-1. Strona wyÅ›wietla produkt o ID 9. Co to oznacza?",
                options: [
                    "Aplikacja wykonuje operacje matematyczne wewnÄ…trz zapytania SQL. To silny wskaÅºnik podatnoÅ›ci na SQL Injection.",
                    "To normalne zachowanie PHP.",
                    "Aplikacja ma bÅ‚Ä…d XSS.",
                    "Serwer jest przeciÄ…Å¼ony."
                ],
                correct: 0,
                explanation: "JeÅ›li `10-1` dziaÅ‚a jak `9`, to znaczy, Å¼e TwÃ³j input trafiÅ‚ bezpoÅ›rednio do silnika bazy danych (ktÃ³ry wykonaÅ‚ odejmowanie). Masz punkt zaczepienia!"
            },
            {
                question: "Co robi operator UNION w ataku SQL Injection?",
                options: [
                    "ÅÄ…czy atakujÄ…cego z serwerem.",
                    "Pozwala poÅ‚Ä…czyÄ‡ wyniki oryginalnego zapytania z wynikami zapytania wstrzykniÄ™tego przez atakujÄ…cego (np. wypisaÄ‡ loginy i hasÅ‚a na ekranie).",
                    "Tworzy nowÄ… tabelÄ™.",
                    "Usuwa duplikaty."
                ],
                correct: 1,
                explanation: "UNION to potÄ™Å¼ne narzÄ™dzie. JeÅ›li strona wyÅ›wietla listÄ™ produktÃ³w, moÅ¼esz uÅ¼yÄ‡ UNION, aby na tej samej liÅ›cie wyÅ›wietliÄ‡ zawartoÅ›Ä‡ tabeli 'users'."
            },
            {
                question: "Co oznacza podwÃ³jny myÅ›lnik (--) w SQL?",
                options: [
                    "Operator odejmowania.",
                    "Znak komentarza. Wszystko po nim jest ignorowane przez bazÄ™ danych.",
                    "Koniec linii.",
                    "BÅ‚Ä…d skÅ‚adni."
                ],
                correct: 1,
                explanation: "Hakerzy uÅ¼ywajÄ… `--` (lub `#` w MySQL), aby 'uciÄ…Ä‡' resztÄ™ oryginalnego zapytania (np. sprawdzanie hasÅ‚a), ktÃ³re mogÅ‚oby spowodowaÄ‡ bÅ‚Ä…d skÅ‚adni."
            },
            {
                type: "scenario",
                question: "UÅ¼ywasz narzÄ™dzia sqlmap i widzisz komunikat: 'GET parameter 'id' seems to be 'AND boolean-based blind'. Co to znaczy?",
                options: [
                    "Parametr jest bezpieczny.",
                    "NarzÄ™dzie wykryÅ‚o, Å¼e moÅ¼e zadawaÄ‡ pytania Prawda/FaÅ‚sz i na tej podstawie wyciÄ…gaÄ‡ dane, mimo braku widocznych bÅ‚Ä™dÃ³w.",
                    "Musisz uÅ¼yÄ‡ przeglÄ…darki.",
                    "Baza danych jest wyÅ‚Ä…czona."
                ],
                correct: 1,
                explanation: "Sqlmap automatyzuje Å¼mudny proces Blind SQLi, zadajÄ…c tysiÄ…ce pytaÅ„ logicznych do serwera, aby literka po literce odczytaÄ‡ nazwÄ™ bazy i tabele."
            },
            {
                question: "Dlaczego samo 'ukrywanie bÅ‚Ä™dÃ³w' (wyÅ‚Ä…czenie verbose errors) nie chroni przed SQL Injection?",
                options: [
                    "Bo hakerzy majÄ… specjalne okulary.",
                    "Bo nadal moÅ¼liwe sÄ… ataki typu Blind SQL Injection (Time-based lub Boolean-based), ktÃ³re nie wymagajÄ… widocznych komunikatÃ³w bÅ‚Ä™dÃ³w.",
                    "Bo bÅ‚Ä™dy i tak sÄ… w logach.",
                    "Chroni, to wystarczajÄ…ce zabezpieczenie."
                ],
                correct: 1,
                explanation: "Ukrycie bÅ‚Ä™dÃ³w utrudnia sprawÄ™ (zmienia Classic SQLi w Blind SQLi), ale nie usuwa podatnoÅ›ci. Dziura nadal tam jest, tylko trudniej jÄ… zauwaÅ¼yÄ‡."
            }
        ];
    </script>

    <script src="quiz.js"></script>

</body>

</html>