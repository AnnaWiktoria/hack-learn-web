<!DOCTYPE html>
<html lang="pl">

<head>
      <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AnnaWiktoria">
    <meta name="copyright" content="AnnaWiktoria">
    <meta name="description" content="Interaktywny kurs bezpieczeÅ„stwa aplikacji webowych. Licencja CC BY-NC-SA.">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com; 
               script-src 'self' 'unsafe-inline'; 
               img-src 'self' data:;">

    <title>Kurs bezpieczeÅ„stwa aplikacji webowych - Lekcja 10: SSRF</title>
      
      <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <style>
        /* Akcent: Alert Orange (Cloud Danger / Firewall Bypass) */
        :root {
            --accent: #ff3d00;
            --accent-glow: rgba(255, 61, 0, 0.3);
        }

        .ip-addr {
            color: #00e5ff;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>SSRF (SERVER-SIDE REQUEST FORGERY)</h1>
            <p>MODUÅ 10: Atakowanie serwera "od Å›rodka", Chmura i 169.254.169.254</p>
        </header>

        <!-- 1. DEFINICJA -->
        <section>
            <h2>> WRÃ“G WEWNÄ˜TRZNY</h2>
            <p>W ataku XSS zmuszaliÅ›my przeglÄ…darkÄ™ ofiary do dziaÅ‚ania. W <strong>SSRF</strong> zmuszamy
                <strong>serwer</strong> do wykonania Å¼Ä…dania HTTP tam, gdzie chcemy.</p>

            <div class="card">
                <h3>JAK TO DZIAÅA?</h3>
                <p>WyobraÅº sobie funkcjÄ™ "Wgraj z URL" (np. import awatara).</p>
                <pre><code><span class="comment"># Normalne uÅ¼ycie:</span>
POST /upload
url=https://google.com/logo.png

<span class="comment"># Serwer wykonuje w tle:</span>
curl https://google.com/logo.png</code></pre>

                <p>A co jeÅ›li podasz adres wewnÄ™trzny, do ktÃ³rego Ty nie masz dostÄ™pu, ale serwer ma?</p>
                <pre><code>url=http://localhost/admin</code></pre>
                <p>Serwer poÅ‚Ä…czy siÄ™ <strong>sam ze sobÄ…</strong> (loopback interface), omijajÄ…c firewalle!</p>
            </div>
        </section>

        <!-- 2. CELE ATAKU -->
        <section>
            <h2>> CO MOÅ»NA UKRAÅšÄ†?</h2>
            <p>SSRF to scyzoryk szwajcarski. Oto gÅ‚Ã³wne cele:</p>

            <div class="card">
                <h3>1. METADANE CHMURY (The Holy Grail) â˜ï¸</h3>
                <p>JeÅ›li serwer stoi na AWS, GCP lub Azure, ma dostÄ™p do specjalnego adresu IP.</p>
                <p><strong>Adres:</strong> <span class="ip-addr">169.254.169.254</span></p>
                <p>WysyÅ‚ajÄ…c tam Å¼Ä…danie, moÅ¼esz wyciÄ…gnÄ…Ä‡ <strong>AWS Access Keys</strong> i przejÄ…Ä‡ caÅ‚Ä…
                    infrastrukturÄ™ firmy.</p>
                <pre><code>http://169.254.169.254/latest/meta-data/iam/security-credentials/</code></pre>
            </div>

            <div class="card">
                <h3>2. SKANOWANIE SIECI WEWNÄ˜TRZNEJ</h3>
                <p>MoÅ¼esz uÅ¼yÄ‡ serwera jako proxy do skanowania portÃ³w w jego sieci lokalnej.</p>
                <ul>
                    <li><code>url=http://192.168.0.1:80</code> -> OdpowiedÅº 200 (Router admin panel)</li>
                    <li><code>url=http://192.168.0.2:9200</code> -> OdpowiedÅº JSON (Elasticsearch bez hasÅ‚a)</li>
                </ul>
            </div>

            <div class="card">
                <h3>3. ODTRZYT PLIKÃ“W LOKALNYCH</h3>
                <p>NiektÃ³re biblioteki obsÅ‚ugujÄ… inne protokoÅ‚y niÅ¼ HTTP.</p>
                <pre><code>url=file:///etc/passwd</code></pre>
                <p>JeÅ›li zadziaÅ‚a -> masz LFI (Local File Inclusion) przez SSRF.</p>
            </div>
        </section>

        <!-- 3. OBRONA I BYPASS -->
        <section>
            <h2>> BYPASSOWANIE FILTRÃ“W</h2>
            <p>ProgramiÅ›ci prÃ³bujÄ… broniÄ‡ siÄ™ "czarnÄ… listÄ…" (Blacklist), blokujÄ…c sÅ‚owo "localhost" lub "127.0.0.1".
                Hakerzy to uwielbiajÄ….</p>

            <div class="card">
                <h3>JAK ZAPISAÄ† "LOCALHOST" INACZEJ?</h3>
                <p>Wszystkie poniÅ¼sze adresy prowadzÄ… do tego samego:</p>
                <ul>
                    <li><code>http://127.0.0.1</code> (Standard)</li>
                    <li><code>http://2130706433</code> (Format dziesiÄ™tny)</li>
                    <li><code>http://0177.0.0.1</code> (Format Ã³semkowy)</li>
                    <li><code>http://0.0.0.0</code> (W Linuksie czÄ™sto dziaÅ‚a)</li>
                    <li><code>http://[::]</code> (IPv6)</li>
                    <li><code>http://localtest.me</code> (Domena DNS wskazujÄ…ca na 127.0.0.1)</li>
                </ul>
            </div>

            <div class="card" style="border-color: var(--success);">
                <h3>JEDYNA SKUTECZNA OBRONA</h3>
                <p><strong>Allowlist (BiaÅ‚a lista).</strong> Pozwalaj Å‚Ä…czyÄ‡ siÄ™ TYLKO z okreÅ›lonymi domenami (np.
                    <code>*.imgur.com</code>). Wszystko inne blokuj.</p>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section>
            <h2>CHECKLISTA / RED FLAGS</h2>
            <div class="card checklist-card">
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Import z URL / Webhooki:</strong> KaÅ¼de miejsce, gdzie wpisujesz adres URL, a serwer
                        coÅ› z niego pobiera (obrazek, PDF, dane).</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Generatory PDF:</strong> CzÄ™sto podatne na wstrzykniÄ™cie HTML z iframe wskazujÄ…cym na
                        `file:///etc/passwd` lub localhost.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Blind SSRF:</strong> Serwer nie zwraca treÅ›ci, ale np. odpowiada szybciej (port
                        otwarty) lub wolniej (port zamkniÄ™ty/timeout).</div>
                </div>
            </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz-section">
            <h2>ğŸ“ WERYFIKACJA WIEDZY</h2>
            <div id="quiz-container"></div>
        </section>

        <footer>
            <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Hack & Learn: Web Edition | ModuÅ‚ 10</p>
        </footer>
    </div>

    <!-- DANE DO QUIZU -->
    <script>
        const quizData = [
            {
                question: "Co oznacza skrÃ³t SSRF?",
                options: [
                    "Secure Socket Request Framework",
                    "Server-Side Request Forgery",
                    "Super Secure Remote File",
                    "Simple Server Reset Function"
                ],
                correct: 1,
                explanation: "FaÅ‚szerstwo Å¼Ä…dania po stronie serwera. To atak, w ktÃ³rym serwer wykonuje Å¼Ä…danie HTTP zainicjowane przez atakujÄ…cego."
            },
            {
                question: "Jaka jest gÅ‚Ã³wna rÃ³Å¼nica miÄ™dzy CSRF a SSRF?",
                options: [
                    "CSRF atakuje serwer, SSRF atakuje klienta.",
                    "CSRF zmusza przeglÄ…darkÄ™ ofiary do wykonania akcji. SSRF zmusza serwer (backend) do wykonania poÅ‚Ä…czenia.",
                    "Nie ma rÃ³Å¼nicy.",
                    "SSRF dotyczy tylko plikÃ³w tekstowych."
                ],
                correct: 1,
                explanation: "W CSRF 'posÅ‚aÅ„cem' jest przeglÄ…darka uÅ¼ytkownika. W SSRF 'posÅ‚aÅ„cem' jest sam serwer aplikacji."
            },
            {
                type: "scenario",
                question: "Testujesz aplikacjÄ™ na AWS. Znajdujesz SSRF. Jaki adres IP sprawdzasz jako pierwszy?",
                options: [
                    "192.168.1.1",
                    "8.8.8.8",
                    "169.254.169.254",
                    "127.0.0.1"
                ],
                correct: 2,
                explanation: "169.254.169.254 to magiczny adres 'Instance Metadata Service'. W chmurze (AWS/Azure/GCP) pozwala on wyciÄ…gnÄ…Ä‡ klucze dostÄ™powe do API chmury."
            },
            {
                question: "Co to jest 'Blind SSRF'?",
                options: [
                    "Atak, w ktÃ³rym serwer nie zwraca Ci treÅ›ci pobranego pliku/strony, ale moÅ¼esz wnioskowaÄ‡ o sukcesie np. na podstawie czasu odpowiedzi.",
                    "Atak wykonywany z zawiÄ…zanymi oczami.",
                    "Atak na serwer bez ekranu.",
                    "SSRF, ktÃ³ry nie dziaÅ‚a."
                ],
                correct: 0,
                explanation: "W Blind SSRF nie widzisz 'etc/passwd' na ekranie. Ale jeÅ›li Å¼Ä…danie do portu 80 trwa 0.1s, a do portu 81 trwa 5s (timeout), to wiesz, Å¼e port 80 jest otwarty."
            },
            {
                question: "Jakiego protokoÅ‚u (schematu URL) moÅ¼na uÅ¼yÄ‡ w SSRF, aby odczytaÄ‡ pliki lokalne na serwerze?",
                options: [
                    "http://",
                    "ftp://",
                    "file://",
                    "mailto:"
                ],
                correct: 2,
                explanation: "JeÅ›li biblioteka obsÅ‚ugujÄ…ca Å¼Ä…dania (np. cURL) nie ma zablokowanych protokoÅ‚Ã³w, `file:///etc/passwd` pozwoli odczytaÄ‡ pliki systemowe."
            },
            {
                type: "scenario",
                question: "Aplikacja blokuje ciÄ…g '127.0.0.1'. Jak moÅ¼esz sprÃ³bowaÄ‡ obejÅ›Ä‡ ten filtr, aby dostaÄ‡ siÄ™ do localhost?",
                options: [
                    "NapisaÄ‡ do admina proÅ›bÄ™ o odblokowanie.",
                    "UÅ¼yÄ‡ zapisu alternatywnego, np. '2130706433' (Decimal), '0.0.0.0' lub domeny typu 'localtest.me'.",
                    "UÅ¼yÄ‡ HTTPS.",
                    "ZrestartowaÄ‡ router."
                ],
                correct: 1,
                explanation: "Filtrowanie po stringach (czarna lista) jest nieskuteczne. Istnieje wiele sposobÃ³w zapisu adresu IP, ktÃ³re sÄ… interpretowane przez system jako ten sam adres."
            },
            {
                question: "Co to jest 'DNS Rebinding' w kontekÅ›cie SSRF?",
                options: [
                    "Restart serwera DNS.",
                    "Zaawansowana technika obejÅ›cia filtrÃ³w. AtakujÄ…cy uÅ¼ywa domeny, ktÃ³ra najpierw rozwiÄ…zuje siÄ™ na bezpieczne IP (np. 8.8.8.8), a chwilÄ™ pÃ³Åºniej (gdy serwer wykonuje wÅ‚aÅ›ciwe Å¼Ä…danie) zmienia siÄ™ na 127.0.0.1.",
                    "Blokowanie zapytaÅ„ DNS.",
                    "Szyfrowanie DNS."
                ],
                correct: 1,
                explanation: "To sposÃ³b na obejÅ›cie 'Time-of-Check to Time-of-Use' (TOCTOU). Serwer sprawdza domenÄ™ -> jest OK. Serwer pobiera dane -> domena wskazuje juÅ¼ na localhost."
            },
            {
                question: "Dlaczego SSRF jest groÅºne dla sieci wewnÄ™trznej firmy?",
                options: [
                    "Bo zuÅ¼ywa transfer.",
                    "Bo pozwala atakujÄ…cemu z zewnÄ…trz 'przeskoczyÄ‡' firewall i skanowaÄ‡ serwery wewnÄ™trzne (Intranet), ktÃ³re nie powinny byÄ‡ dostÄ™pne z Internetu.",
                    "Bo zmienia tapetÄ™ na serwerze.",
                    "Nie jest groÅºne, to tylko bug."
                ],
                correct: 1,
                explanation: "Serwer WWW stoi zazwyczaj w strefie DMZ, ale ma dostÄ™p do bazy danych i innych usÅ‚ug w sieci LAN. SSRF robi z niego bramkÄ™ (proxy) dla hakera."
            },
            {
                type: "scenario",
                question: "Funkcja 'Eksportuj do PDF' pozwala na uÅ¼ycie HTML. Wstrzykujesz: &lt;iframe src='http://169.254.169.254/...'&gt;. W wygenerowanym PDF widzisz klucze AWS. Co to za atak?",
                options: [
                    "XSS",
                    "SQL Injection",
                    "SSRF (poprzez generator PDF)",
                    "Buffer Overflow"
                ],
                correct: 2,
                explanation: "Generatory PDF czÄ™sto uÅ¼ywajÄ… silnikÃ³w przeglÄ…darkowych (headless chrome) dziaÅ‚ajÄ…cych na serwerze. JeÅ›li renderujÄ… zdalne zasoby, sÄ… podatne na SSRF."
            },
            {
                question: "Jaka jest najlepsza metoda obrony przed SSRF?",
                options: [
                    "Blokowanie sÅ‚owa 'localhost'.",
                    "Allowlist (BiaÅ‚a lista) dozwolonych domen i protokoÅ‚Ã³w oraz wyÅ‚Ä…czenie obsÅ‚ugi przekierowaÅ„.",
                    "UÅ¼ywanie WAF.",
                    "Uruchomienie serwera jako root."
                ],
                correct: 1,
                explanation: "Zasada 'Default Deny'. Pozwalaj Å‚Ä…czyÄ‡ siÄ™ tylko tam, gdzie to biznesowo uzasadnione. JeÅ›li to niemoÅ¼liwe - izoluj sieÄ‡ serwera."
            }
        ];
    </script>

    <script src="quiz.js"></script>

</body>


</html>

