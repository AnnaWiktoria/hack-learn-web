<!DOCTYPE html>
<html lang="pl">

<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="AnnaWiktoria">
    <meta name="copyright" content="AnnaWiktoria">
    <meta name="description" content="Interaktywny kurs bezpieczeÅ„stwa aplikacji webowych. Licencja CC BY-NC-SA.">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
               style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
               font-src 'self' https://fonts.gstatic.com; 
               script-src 'self' 'unsafe-inline'; 
               img-src 'self' data:;">

    <title>Kurs bezpieczeÅ„stwa aplikacji webowych - Lekcja 04: NagÅ‚Ã³wki BezpieczeÅ„stwa</title>

    <link rel="stylesheet" href="style.css">

    <style>
        /* Akcent dla tej lekcji: Neon Lime (Defense/Shields) */
        :root {
            --accent: #76ff03;
            --accent-glow: rgba(118, 255, 3, 0.3);
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>SECURITY HEADERS</h1>
            <p>MODUÅ 04: Tarcze przeglÄ…darki, CSP, HSTS i Ochrona przed Clickjackingiem</p>
        </header>

        <!-- 1. WPROWADZENIE -->
        <section>
            <h2>> PIERWSZA LINIA OBRONY</h2>
            <p>NagÅ‚Ã³wki bezpieczeÅ„stwa to instrukcje, ktÃ³re serwer wysyÅ‚a do przeglÄ…darki, mÃ³wiÄ…c jej: "Hej, zachowuj
                siÄ™ bezpiecznie!". Pentester sprawdza je automatycznie, bo ich brak uÅ‚atwia ataki XSS, Clickjacking czy
                MiTM.</p>

            <div class="card">
                <h3>ÅšWIÄ˜TA TRÃ“JCA OBRONY</h3>
                <p>JeÅ›li w raporcie z audytu brakuje tych trzech, klient ma problem:</p>
                <ol>
                    <li style="margin-bottom:10px;"><strong style="color:var(--accent)">Content-Security-Policy
                            (CSP)</strong> â€“ Szef wszystkich nagÅ‚Ã³wkÃ³w. Blokuje nieautoryzowane skrypty (XSS).</li>
                    <li style="margin-bottom:10px;"><strong style="color:var(--accent)">Strict-Transport-Security
                            (HSTS)</strong> â€“ Wymusza szyfrowanie. Blokuje ataki downgrade (HTTP).</li>
                    <li><strong style="color:var(--accent)">X-Frame-Options (XFO)</strong> â€“ Blokuje Å‚adowanie strony w
                        ramkach (Clickjacking).</li>
                </ol>
            </div>
        </section>

        <!-- 2. SZCZEGÃ“ÅY TECHNICZNE -->
        <section>
            <h2>> ANALIZA NAGÅÃ“WKÃ“W</h2>

            <!-- CSP -->
            <div class="card">
                <h3>1. CSP (Content Security Policy)</h3>
                <p>Definiuje "biaÅ‚Ä… listÄ™" ÅºrÃ³deÅ‚, z ktÃ³rych przeglÄ…darka moÅ¼e pobieraÄ‡ obrazki, skrypty czy style.</p>
                <pre><code>Content-Security-Policy: default-src 'self'; script-src 'self' https://trusted.com</code></pre>
                <p><strong>Co to oznacza?</strong> "Uruchamiaj skrypty tylko z mojego serwera ('self') oraz z
                    trusted.com. ResztÄ™ blokuj."</p>
                <p><span class="status-badge s-5xx">RED FLAG:</span> <code>unsafe-inline</code> lub
                    <code>unsafe-eval</code>. Te opcje wyÅ‚Ä…czajÄ… ochronÄ™ przed XSS!</p>
            </div>

            <!-- HSTS -->
            <div class="card">
                <h3>2. HSTS (Strict-Transport-Security)</h3>
                <p>MÃ³wi przeglÄ…darce: "Przez nastÄ™pny rok w ogÃ³le nie prÃ³buj Å‚Ä…czyÄ‡ siÄ™ ze mnÄ… przez nieszyfrowane
                    HTTP".</p>
                <pre><code>Strict-Transport-Security: max-age=31536000; includeSubDomains; preload</code></pre>
                <p>To zabija ataki typu <strong>SSL Stripping</strong> (np. narzÄ™dziem sslstrip w sieci Wi-Fi), gdzie
                    atakujÄ…cy prÃ³buje zmusiÄ‡ ofiarÄ™ do uÅ¼ycia czystego HTTP.</p>
            </div>

            <!-- INNE WAÅ»NE -->
            <div class="card">
                <h3>3. POZOSTAÅE TARCZE</h3>
                <table>
                    <tr>
                        <th>NagÅ‚Ã³wek</th>
                        <th>PrzeciwdziaÅ‚a</th>
                    </tr>
                    <tr>
                        <td><code>X-Frame-Options: DENY</code></td>
                        <td><strong>Clickjacking.</strong> Strona nie moÅ¼e byÄ‡ wyÅ›wietlona wewnÄ…trz
                            <code>&lt;iframe&gt;</code> na innej stronie.</td>
                    </tr>
                    <tr>
                        <td><code>X-Content-Type-Options: nosniff</code></td>
                        <td><strong>MIME Sniffing.</strong> Zmusza przeglÄ…darkÄ™ do trzymania siÄ™ zadeklarowanego typu
                            pliku (nie wykona pliku .jpg jako skryptu JS).</td>
                    </tr>
                    <tr>
                        <td><code>Referrer-Policy: no-referrer</code></td>
                        <td><strong>Wyciek danych.</strong> Nie wysyÅ‚a adresu URL (ktÃ³ry moÅ¼e zawieraÄ‡ tokeny) do stron,
                            na ktÃ³re przechodzi uÅ¼ytkownik.</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- 3. PERSPEKTYWA PENTESTERA -->
        <section>
            <h2>> PERSPEKTYWA PENTESTERA</h2>
            <p>Brak nagÅ‚Ã³wkÃ³w to zazwyczaj podatnoÅ›Ä‡ klasy <strong>Low</strong> lub <strong>Informational</strong>,
                chyba Å¼e uda siÄ™ stworzyÄ‡ dziaÅ‚ajÄ…cy exploit (np. Clickjacking na zmianÄ™ hasÅ‚a).</p>

            <div class="card">
                <h3>SCENARIUSZ: BYPASSING CSP</h3>
                <p>Widzisz nagÅ‚Ã³wek:</p>
                <pre><code>Content-Security-Policy: script-src 'self' 'unsafe-inline'</code></pre>
                <p>Programista myÅ›laÅ‚, Å¼e jest bezpieczny, bo dodaÅ‚ CSP. Ale <code>'unsafe-inline'</code> pozwala na
                    wykonanie: <code>&lt;script&gt;alert(1)&lt;/script&gt;</code>.</p>
                <p><strong>Wniosek:</strong> ObecnoÅ›Ä‡ nagÅ‚Ã³wka nie oznacza bezpieczeÅ„stwa. Musisz sprawdziÄ‡ jego
                    konfiguracjÄ™ (np. narzÄ™dziem Google CSP Evaluator).</p>
            </div>

            <div class="card">
                <h3>SCENARIUSZ: CLICKJACKING</h3>
                <p>Brak nagÅ‚Ã³wka <code>X-Frame-Options</code> na stronie "UsuÅ„ konto".</p>
                <p><strong>Atak:</strong> Tworzysz stronÄ™-puÅ‚apkÄ™ z niewidocznÄ… ramkÄ… (iframe) zawierajÄ…cÄ… stronÄ™
                    ofiary. Przycisk "Wygraj iPhone" umieszczasz idealnie nad przyciskiem "UsuÅ„ konto". Ofiara klika w
                    iPhone, a klika w usuniÄ™cie konta.</p>
            </div>
        </section>

        <!-- CHECKLIST -->
        <section>
            <h2>CHECKLISTA / RED FLAGS</h2>
            <div class="card checklist-card">
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>CSP z 'unsafe-inline':</strong> To tak, jakby zamknÄ…Ä‡ drzwi na klucz, ale zostawiÄ‡
                        klucz w zamku. XSS nadal moÅ¼liwy.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Brak HSTS:</strong> UÅ¼ytkownik wpisujÄ…cy rÄ™cznie "http://bank.com" jest naraÅ¼ony na
                        atak Man-in-the-Middle przy pierwszym poÅ‚Ä…czeniu.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Stare nagÅ‚Ã³wki:</strong> `X-XSS-Protection` jest przestarzaÅ‚y (deprecated) i nowoczesne
                        przeglÄ…darki go ignorujÄ…. Nie traktuj go jako zabezpieczenia.</div>
                </div>
                <div class="checklist-item">
                    <span class="check-icon">âš </span>
                    <div><strong>Server Version Disclosure:</strong> NagÅ‚Ã³wek `Server: Apache/2.4.41 (Ubuntu)` zdradza
                        wersjÄ™ oprogramowania. To informacja dla atakujÄ…cego o potencjalnych CVE.</div>
                </div>
            </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz-section">
            <h2>ğŸ“ WERYFIKACJA WIEDZY</h2>
            <div id="quiz-container"></div>
        </section>

       <footer>
            <p style="text-align: center; margin-top: 50px; color: #555;">&copy; 2026 Hack & Learn: Web Edition | ModuÅ‚
                04</p>
        </footer>
    </div>

    <!-- DANE DO QUIZU -->
    <script>
        const quizData = [
            {
                question: "KtÃ³ry nagÅ‚Ã³wek jest uwaÅ¼any za najskuteczniejszÄ… ochronÄ™ przed atakami XSS (Cross-Site Scripting)?",
                options: [
                    "X-XSS-Protection",
                    "Strict-Transport-Security",
                    "Content-Security-Policy (CSP)",
                    "Access-Control-Allow-Origin"
                ],
                correct: 2,
                explanation: "CSP pozwala precyzyjnie okreÅ›liÄ‡, skÄ…d przeglÄ…darka moÅ¼e Å‚adowaÄ‡ skrypty. X-XSS-Protection jest przestarzaÅ‚y."
            },
            {
                type: "scenario",
                question: "Analizujesz nagÅ‚Ã³wek CSP: \"script-src 'self' 'unsafe-inline'\". Co raportujesz klientowi?",
                options: [
                    "Konfiguracja jest poprawna i bezpieczna.",
                    "UÅ¼ycie 'unsafe-inline' niweluje ochronÄ™ przed XSS, poniewaÅ¼ pozwala na wykonywanie skryptÃ³w wstrzykniÄ™tych bezpoÅ›rednio w HTML.",
                    "NaleÅ¼y dodaÄ‡ 'unsafe-eval' dla zwiÄ™kszenia bezpieczeÅ„stwa.",
                    "Brakuje dyrektywy img-src."
                ],
                correct: 1,
                explanation: "'unsafe-inline' to najczÄ™stszy bÅ‚Ä…d konfiguracji CSP. Pozwala on na wykonanie payloadÃ³w typu <script>alert(1)< /script>, przed ktÃ³rymi CSP ma chroniÄ‡."
            },
            {
                question: "Przed jakim atakiem chroni nagÅ‚Ã³wek X-Frame-Options (oraz CSP frame-ancestors)?",
                options: [
                    "SQL Injection",
                    "Clickjacking (UI Redressing)",
                    "Session Hijacking",
                    "Buffer Overflow"
                ],
                correct: 1,
                explanation: "Blokuje on moÅ¼liwoÅ›Ä‡ zaÅ‚adowania Twojej strony wewnÄ…trz ramki (iframe) na innej, zÅ‚oÅ›liwej stronie."
            },
            {
                question: "Co robi nagÅ‚Ã³wek HSTS (Strict-Transport-Security)?",
                options: [
                    "Szyfruje bazÄ™ danych.",
                    "Wymusza na przeglÄ…darce Å‚Ä…czenie siÄ™ z serwerem wyÅ‚Ä…cznie przez HTTPS przez okreÅ›lony czas, chroniÄ…c przed SSL Stripping.",
                    "Sprawdza siÅ‚Ä™ hasÅ‚a uÅ¼ytkownika.",
                    "Ukrywa wersjÄ™ serwera Apache."
                ],
                correct: 1,
                explanation: "HSTS zapobiega atakom 'downgrade', gdzie atakujÄ…cy prÃ³buje zmusiÄ‡ ofiarÄ™ do korzystania z nieszyfrowanej wersji strony."
            },
            {
                question: "NagÅ‚Ã³wek 'X-Content-Type-Options: nosniff' zapobiega:",
                options: [
                    "WÄ…chaniu pakietÃ³w sieciowych.",
                    "MIME Sniffingowi - sytuacji, gdzie przeglÄ…darka zgaduje typ pliku (np. traktuje plik .jpg z kodem HTML jako skrypt wykonywalny).",
                    "WysyÅ‚aniu formularzy bez tokena CSRF.",
                    "Indeksowaniu strony przez Google."
                ],
                correct: 1,
                explanation: "Bez 'nosniff' przeglÄ…darki mogÄ… zignorowaÄ‡ zadeklarowany Content-Type i wykonaÄ‡ zÅ‚oÅ›liwy kod ukryty w pliku graficznym lub tekstowym."
            },
            {
                type: "scenario",
                question: "W raporcie widzisz informacjÄ™ o brakujÄ…cym nagÅ‚Ã³wku 'Referrer-Policy'. Jakie jest ryzyko?",
                options: [
                    "Krytyczne - atakujÄ…cy moÅ¼e przejÄ…Ä‡ serwer.",
                    "Wyciek informacji - peÅ‚ny URL (mogÄ…cy zawieraÄ‡ tokeny w parametrach GET) jest wysyÅ‚any do zewnÄ™trznych stron, na ktÃ³re klika uÅ¼ytkownik.",
                    "Brak ryzyka, to tylko informacja debugowania.",
                    "Strona bÄ™dzie Å‚adowaÄ‡ siÄ™ wolniej."
                ],
                correct: 1,
                explanation: "JeÅ›li jesteÅ› na `bank.com/reset?token=123` i klikniesz link do `evil.com`, bez odpowiedniej polityki Referer, `evil.com` w swoich logach zobaczy TwÃ³j token."
            },
            {
                question: "Dlaczego nagÅ‚Ã³wek 'Server: Apache/2.4.41' jest uznawany za (maÅ‚y) problem bezpieczeÅ„stwa?",
                options: [
                    "Bo Apache to wolny serwer.",
                    "To ujawnienie informacji (Information Disclosure). AtakujÄ…cy znajÄ…c dokÅ‚adnÄ… wersjÄ™, moÅ¼e sprawdziÄ‡ w bazie CVE, czy ma ona znane luki.",
                    "Bo zajmuje zbyt duÅ¼o transferu.",
                    "Bo RODO tego zabrania."
                ],
                correct: 1,
                explanation: "W security wyznajemy zasadÄ™ minimalizacji informacji. Nie pomagaj atakujÄ…cemu, mÃ³wiÄ…c mu dokÅ‚adnie, jaki soft atakuje."
            },
            {
                question: "Co oznacza dyrektywa 'default-src' w CSP?",
                options: [
                    "DomyÅ›lne ÅºrÃ³dÅ‚o skryptÃ³w, jeÅ›li nie podano innej dyrektywy.",
                    "DomyÅ›lny font strony.",
                    "Fallback dla wszystkich typÃ³w zasobÃ³w (skrypty, style, obrazki), ktÃ³re nie majÄ… zdefiniowanych wÅ‚asnych reguÅ‚.",
                    "Lista zablokowanych adresÃ³w IP."
                ],
                correct: 2,
                explanation: "JeÅ›li ustawisz `default-src 'self'` i nie zdefiniujesz `img-src`, to obrazki teÅ¼ bÄ™dÄ… Å‚adowane tylko z 'self'."
            },
            {
                type: "scenario",
                question: "Chcesz zabezpieczyÄ‡ stronÄ™ przed Clickjackingiem, ale musisz pozwoliÄ‡ na Å‚adowanie jej w ramce na 'partner.com'. Jakiego nagÅ‚Ã³wka uÅ¼yjesz?",
                options: [
                    "X-Frame-Options: DENY",
                    "Content-Security-Policy: frame-ancestors 'self' https://partner.com",
                    "Access-Control-Allow-Origin: *",
                    "Strict-Transport-Security: includeSubDomains"
                ],
                correct: 1,
                explanation: "X-Frame-Options jest maÅ‚o elastyczny (DENY lub SAMEORIGIN). CSP z dyrektywÄ… `frame-ancestors` pozwala precyzyjnie okreÅ›liÄ‡ domeny, ktÃ³re mogÄ… ramkowaÄ‡ TwojÄ… stronÄ™."
            },
            {
                question: "Co oznacza flaga 'preload' w nagÅ‚Ã³wku HSTS?",
                options: [
                    "WstÄ™pne Å‚adowanie obrazkÃ³w dla szybkoÅ›ci.",
                    "ProÅ›bÄ™ o wpisanie domeny na listÄ™ 'HSTS Preload List' zaszytÄ… w przeglÄ…darkach (Chrome, Firefox). DziÄ™ki temu nawet PIERWSZE poÅ‚Ä…czenie jest szyfrowane.",
                    "Åadowanie skryptÃ³w przed renderowaniem HTML.",
                    "BlokadÄ™ reklam."
                ],
                correct: 1,
                explanation: "Preload to najwyÅ¼szy poziom HSTS. Domena jest 'hardkodowana' w kodzie ÅºrÃ³dÅ‚owym przeglÄ…darki jako wymagajÄ…ca HTTPS. Atak SSL Strip jest niemoÅ¼liwy nawet przy pierwszym wejÅ›ciu."
            }
        ];
    </script>

    <script src="quiz.js"></script>

</body>


</html>
